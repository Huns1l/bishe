(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a5c5b97"],{"0510":function(e,t,o){"use strict";o("a4d3"),o("e01a");var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{size:"30%",title:e.ifCreate?"新增":"审批退货单",visible:e.drawer,direction:e.direction,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,width:"1200px"},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"门店",prop:"shopCode"}},[t("el-select",{ref:"selection",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"门店",clearable:"",disabled:""},model:{value:e.ruleForm.shopCode,callback:function(t){e.$set(e.ruleForm,"shopCode",t)},expression:"ruleForm.shopCode"}},e._l(e.shopOptions,(function(o){return t("el-option",{key:o.shopKey,attrs:{label:o.shopName,value:o.shopCode},nativeOn:{click:function(t){return e.setShopName.apply(null,arguments)}}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"商品",prop:"goodsCode"}},[t("el-select",{ref:"goodsSelect",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"商品",clearable:"",disabled:""},model:{value:e.ruleForm.goodsCode,callback:function(t){e.$set(e.ruleForm,"goodsCode",t)},expression:"ruleForm.goodsCode"}},e._l(e.goodsOptions,(function(o){return t("el-option",{key:o.goodsCode,attrs:{label:o.goodsName,value:o.goodsCode},nativeOn:{click:function(t){return e.setGoodsName.apply(null,arguments)}}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"客户",prop:"customerCode"}},[t("el-select",{ref:"supplierSelect",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"客户",clearable:"",disabled:""},model:{value:e.ruleForm.customerCode,callback:function(t){e.$set(e.ruleForm,"customerCode",t)},expression:"ruleForm.customerCode"}},e._l(e.customerOptions,(function(o){return t("el-option",{key:o.supplierKey,attrs:{label:o.customerName,value:o.customerCode},nativeOn:{click:function(t){return e.setSupplierName.apply(null,arguments)}}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"仓库",prop:"inventoryCode"}},[t("el-select",{ref:"inventorySelect",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"仓库",clearable:"",disabled:""},model:{value:e.ruleForm.inventoryCode,callback:function(t){e.$set(e.ruleForm,"inventoryCode",t)},expression:"ruleForm.inventoryCode"}},e._l(e.inventoryOptions,(function(o){return t("el-option",{key:o.inventoryKey,attrs:{label:o.inventoryName,value:o.inventoryCode,disabled:1!=o.status},nativeOn:{click:function(t){return e.setPosition.apply(null,arguments)}}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"库位",prop:"positionCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"库位",clearable:"",disabled:""},model:{value:e.ruleForm.positionCode,callback:function(t){e.$set(e.ruleForm,"positionCode",t)},expression:"ruleForm.positionCode"}},e._l(e.positionOptions,(function(e){return t("el-option",{key:e.positionCode,attrs:{label:e.positionCode,value:e.positionCode,clearable:"",placeholder:"库位"}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"计划数",prop:"outputPlan"}},[t("el-input",{attrs:{clearable:"",placeholder:"计划数",disabled:"",min:0,type:"Number"},model:{value:e.ruleForm.outputPlan,callback:function(t){e.$set(e.ruleForm,"outputPlan",t)},expression:"ruleForm.outputPlan"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"出库价格",prop:"outputPrice"}},[t("el-input",{attrs:{clearable:"",placeholder:"出库价格",disabled:"",min:0,type:"Number"},model:{value:e.ruleForm.outputPrice,callback:function(t){e.$set(e.ruleForm,"outputPrice",t)},expression:"ruleForm.outputPrice"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"实际数",prop:"outputActual"}},[t("el-input",{attrs:{clearable:"",placeholder:"实际数",disabled:"",min:0,type:"Number"},model:{value:e.ruleForm.outputActual,callback:function(t){e.$set(e.ruleForm,"outputActual",t)},expression:"ruleForm.outputActual"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"出库类型",prop:"type"}},[t("el-select",{attrs:{size:"small",placeholder:"出库类型",clearable:"",disabled:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[t("el-option",{attrs:{label:"零售出库",value:0}}),t("el-option",{attrs:{label:"客户订购",value:1}}),t("el-option",{attrs:{label:"调货出库",value:2}})],1)],1)],1),t("el-col",{attrs:{span:10}},[t("span",{staticStyle:{"margin-left":"8%"}},[e._v("起止日期")]),t("el-date-picker",{staticStyle:{width:"310px","margin-left":"10px"},attrs:{type:"daterange",align:"right",disabled:"",size:"large","unlink-panels":"","range-separator":"至","start-placeholder":"预计日期","end-placeholder":"最迟日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss"},nativeOn:{click:function(t){return e.setTime.apply(null,arguments)}},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"门店操作员",prop:"shopPeopleCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"门店操作员",clearable:"",disabled:""},model:{value:e.ruleForm.shopPeopleCode,callback:function(t){e.$set(e.ruleForm,"shopPeopleCode",t)},expression:"ruleForm.shopPeopleCode"}},e._l(e.userOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userCode}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"仓库操作员",prop:"inventoryPeopleCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"仓库操作员",disabled:"",clearable:""},model:{value:e.ruleForm.inventoryPeopleCode,callback:function(t){e.$set(e.ruleForm,"inventoryPeopleCode",t)},expression:"ruleForm.inventoryPeopleCode"}},e._l(e.userOptions1,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userCode}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"申请退货数",prop:"checkNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"申请退货数",disabled:"",type:"Number"},model:{value:e.ruleForm.checkNum,callback:function(t){e.$set(e.ruleForm,"checkNum",t)},expression:"ruleForm.checkNum"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"退货原因",prop:"returnReason"}},[t("el-input",{attrs:{clearable:"",placeholder:"退货原因",type:"textarea",disabled:""},model:{value:e.ruleForm.returnReason,callback:function(t){e.$set(e.ruleForm,"returnReason",t)},expression:"ruleForm.returnReason"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"车辆",prop:"vehicleCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"车辆",clearable:""},model:{value:e.ruleForm.vehicleCode,callback:function(t){e.$set(e.ruleForm,"vehicleCode",t)},expression:"ruleForm.vehicleCode"}},e._l(e.vehicleOptions,(function(e){return t("el-option",{key:e.vehicleKey,attrs:{label:e.vehicleCode,value:e.vehicleCode}})})),1)],1)],1),e.ifShow?t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批结果",prop:"checkStatus"}},[t("el-select",{attrs:{size:"small",placeholder:"审批结果",clearable:""},model:{value:e.ruleForm.checkStatus,callback:function(t){e.$set(e.ruleForm,"checkStatus",t)},expression:"ruleForm.checkStatus"}},[t("el-option",{attrs:{label:"未审批",value:0,disabled:""}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-minus"}),e._v(" 未审批 ")])]),t("el-option",{attrs:{label:"同意",value:1}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-check"}),e._v(" 同意 ")])]),t("el-option",{attrs:{label:"驳回",value:2}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-close"}),e._v(" 驳回 ")])])],1)],1)],1):e._e()],1),t("el-row",[e.ifShow?t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批意见",prop:"description"}},[t("el-input",{attrs:{clearable:"",placeholder:"审批意见",type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1):e._e(),1==e.ruleForm.checkStatus?t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"是否有残次品",prop:"isDefects"}},[t("el-select",{attrs:{size:"small",placeholder:"是否有残次品",clearable:""},model:{value:e.ruleForm.isDefects,callback:function(t){e.$set(e.ruleForm,"isDefects",t)},expression:"ruleForm.isDefects"}},[t("el-option",{attrs:{label:"否",value:0}}),t("el-option",{attrs:{label:"是",value:1}})],1)],1)],1):e._e()],1),t("el-row",[1==e.ruleForm.isDefects?t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"残次品数",prop:"defectsNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"残次品数"},model:{value:e.ruleForm.defectsNum,callback:function(t){e.$set(e.ruleForm,"defectsNum",t)},expression:"ruleForm.defectsNum"}})],1)],1):e._e()],1)],1),t("div",{staticClass:"dialog_footer"},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("提交")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("取消")])],1)],1)},s=[],a=o("ade3"),l=(o("4de4"),o("d3b7"),o("159b"),o("15d4")),i=o("7e1e"),u=o("64dc"),n=o("4ec3"),c=o("c1df"),p=o.n(c),d={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,ruleForm:{returnCheckKey:"",outputWarehouseKey:"",shopCode:"",shopName:"",goodsCode:"",goodsName:"",customerCode:"",customerName:"",outputPlan:"",outputPrice:"",outputActual:"",inventoryCode:"",positionCode:"",createTime:"",deadlineTime:"",vehicleCode:"",status:"",type:"",checkNum:"",checkStatus:"",description:"",shopPeopleCode:"",inventoryPeopleCode:"",isDeleted:"",returnReason:"",returnNum:"",checkType:"",inputOutputKey:"",outputShopCode:"",outputShopName:"",isDefects:"",defectsNum:""},shopOptions:[],goodsOptions:[],positionOptions:[],customerOptions:[],inventoryOptions:[],vehicleOptions:[],userOptions:[],userOptions1:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,o=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",[o,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,o=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",[o,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,o=new Date;t.setTime(t.getTime()+7776e6),e.$emit("pick",[o,t])}}]},value2:"",rules:{description:[{required:!0,message:"请输入审批意见",trigger:"blur"}],checkStatus:[{required:!0,message:"请审批",trigger:"blur"}],isDefects:[{required:!0,message:"是否有残次品",trigger:"blur"}],defectsNum:[{required:!0,message:"残次品数",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{},ifShow:{default:!0}},watch:{},created:function(){this.getshoplist(),this.getgoodslist(),this.getCustomerList(),this.getUserList(),this.getvehicleList(),this.rowData.returnCheckKey?(this.ruleForm.inputOutputKey=this.rowData.inputOutputKey,this.ruleForm.outputWarehouseKey=this.rowData.outputWarehouseKey,this.ruleForm.returnCheckKey=this.rowData.returnCheckKey,this.ruleForm.shopCode=this.rowData.shopCode,this.ruleForm.shopName=this.rowData.shopName,this.ruleForm.goodsCode=this.rowData.goodsCode,this.ruleForm.goodsName=this.rowData.goodsName,this.ruleForm.customerCode=this.rowData.customerCode,this.ruleForm.customerName=this.rowData.customerName,this.ruleForm.outputPlan=this.rowData.outputPlan,this.ruleForm.outputPrice=this.rowData.outputPrice,this.ruleForm.outputActual=this.rowData.outputActual,this.ruleForm.inventoryCode=this.rowData.inventoryCode,this.ruleForm.positionCode=this.rowData.positionCode,this.ruleForm.createTime=this.rowData.createTime,this.ruleForm.deadlineTime=this.rowData.deadlineTime,this.ruleForm.vehicleCode=this.rowData.vehicleCode,this.ruleForm.status=this.rowData.status,this.ruleForm.type=this.rowData.type,this.ruleForm.shopPeopleCode=this.rowData.shopPeopleCode,this.ruleForm.isDeleted=this.rowData.isDeleted,this.ruleForm.inventoryPeopleCode=this.rowData.inventoryPeopleCode,this.ruleForm.returnReason=this.rowData.returnReason,this.ruleForm.checkNum=this.rowData.checkNum,this.ruleForm.checkStatus=this.rowData.checkStatus,this.ruleForm.description=this.rowData.description,this.ruleForm.returnNum=this.rowData.returnNum,this.ruleForm.checkType=this.rowData.checkType,this.ruleForm.outputShopCode=this.rowData.outputShopCode,this.ruleForm.outputShopName=this.rowData.outputShopName,this.value2=[this.rowData.createTime,this.rowData.deadlineTime]):this.ifCreate=!0,this.getShopInventoryList()},methods:{getvehicleList:function(){var e=this;Object(i["yb"])().then((function(t){200==t.data.code?e.vehicleOptions=t.data.data:e.$message.error("获取失败!")}))},getUserList:function(){var e=this;Object(n["a"])({userType:2}).then((function(t){e.userOptions=t.data.data,e.$forceUpdate()})).catch((function(e){console.log(e)})),Object(n["a"])({userType:1}).then((function(t){e.userOptions1=t.data.data,e.$forceUpdate()})).catch((function(e){console.log(e)}))},getshoplist:function(){var e=this;Object(i["ob"])().then((function(t){200==t.data.code?e.shopOptions=t.data.data:e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(i["W"])().then((function(t){200==t.data.code?e.goodsOptions=t.data.data:e.$message.error("获取失败!")}))},getCustomerList:function(){var e=this;Object(i["e"])().then((function(t){200==t.data.code?e.customerOptions=t.data.data:e.$message.error("获取失败!")}))},getShopInventoryList:function(){var e=this;Object(u["m"])({shopCode:this.ruleForm.shopCode}).then((function(t){200==t.data.code?(e.inventoryOptions=t.data.data,e.getpositionList()):e.$message.error("获取失败!")}))},setShopName:function(){this.getShopInventoryList(),this.ruleForm.shopName=this.$refs.selection.selectedLabel},setCustomerName:function(){this.ruleForm.customerName=this.$refs.customerSelect.selectedLabel},setGoodsName:function(){console.log(this.$refs.goodsSelect.selectedLabel),this.ruleForm.goodsName=this.$refs.goodsSelect.selectedLabel},setPosition:function(){var e=this;this.ruleForm.inventoryName=this.$refs.inventorySelect.selectedLabel;var t=this.inventoryOptions.filter((function(t){return t.inventoryCode==e.ruleForm.inventoryCode}));this.getpositionList(t[0].inventoryKey)},getpositionList:function(){var e=this;this.inventoryOptions.forEach((function(t){t.inventoryCode==e.ruleForm.inventoryCode&&Object(i["hb"])({inventoryKey:t.inventoryKey}).then((function(t){200==t.data.code?e.positionOptions=t.data.data:e.$message.error("获取失败!")}))}))},setTime:function(){this.ruleForm.createTime=this.value2[0],this.ruleForm.deadlineTime=this.value2[1]},close:function(){this.$parent.drawer=!1,this.$emit("close")},save:function(e){var t=this;0==this.ruleForm.checkStatus?this.$message.error("请选择同意或驳回!"):(this.ruleForm.createTime=this.value2[0],this.ruleForm.deadlineTime=this.value2[1],this.$refs[e].validate((function(e){if(1==t.ruleForm.checkStatus&&(t.ruleForm.returnNum=t.ruleForm.checkNum,t.ruleForm.outputActual=t.ruleForm.outputActual-t.ruleForm.checkNum),!e)return console.log("error submit!!"),!1;var o={returnCheckKey:t.ruleForm.returnCheckKey,description:t.ruleForm.description,checkType:t.ruleForm.checkType,inputOutputKey:t.ruleForm.outputWarehouseKey,checkStatus:t.ruleForm.checkStatus,happenTime:t.ruleForm.happenTime,checkNum:t.ruleForm.checkNum,checkTime:p()().format("YYYY-MM-DD HH:mm:ss"),outputWarehouse:{outputWarehouseKey:t.ruleForm.outputWarehouseKey,shopCode:t.ruleForm.shopCode,shopName:t.ruleForm.shopName,goodsCode:t.ruleForm.goodsCode,goodsName:t.ruleForm.goodsName,customerCode:t.ruleForm.customerCode,customerName:t.ruleForm.customerName,outputPlan:t.ruleForm.outputPlan,outputPrice:t.ruleForm.outputPrice,outputActual:t.ruleForm.outputActual,inventoryCode:t.ruleForm.inventoryCode,positionCode:t.ruleForm.positionCode,createTime:t.ruleForm.createTime,deadlineTime:t.ruleForm.deadlineTime,isDeleted:t.ruleForm.isDeleted,vehicleCode:t.ruleForm.vehicleCode,status:t.ruleForm.status,type:t.ruleForm.type,shopPeopleCode:t.ruleForm.shopPeopleCode,inventoryPeopleCode:t.ruleForm.inventoryPeopleCode,returnReason:t.ruleForm.returnReason,returnNum:t.ruleForm.returnNum,outputShopCode:t.ruleForm.outputShopCode,outputShopName:t.ruleForm.outputShopName}};Object(l["f"])(o).then((function(e){if(200==e.data.code)if(1==t.ruleForm.checkStatus){var o,r=(o={inputOutputKey:t.ruleForm.outputWarehouseKey,shopkeeperWarehouseKey:"",type:0,transType:0==t.ruleForm.type?3:5,quantity:t.ruleForm.checkNum,startNum:"",finalNum:"",atTime:p()().format("YYYY-MM-DD HH:mm:ss"),status:t.rowData.status,detailWarehouseKey:"",shopCode:t.ruleForm.shopCode,goodsCode:t.ruleForm.goodsCode},Object(a["a"])(o,"status",t.rowData.status),Object(a["a"])(o,"isDefects",t.ruleForm.isDefects),Object(a["a"])(o,"defectsNum",t.ruleForm.defectsNum),o);Object(u["h"])(r).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("编辑失败!")}))}else t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate();else t.$message.error("编辑失败!")}))})))},create:function(e){var t=this;0==this.ruleForm.checkStatus?this.$message.error("请选择同意或驳回!"):(this.ruleForm.createTime=this.value2[0],this.ruleForm.deadlineTime=this.value2[1],this.$refs[e].validate((function(e){if(1==t.ruleForm.checkStatus&&(t.ruleForm.returnNum=t.ruleForm.checkNum,t.ruleForm.outputActual=t.ruleForm.outputActual-t.ruleForm.checkNum),!e)return console.log("error submit!!"),!1;var o={returnCheckKey:t.ruleForm.returnCheckKey,description:t.ruleForm.description,checkType:t.ruleForm.checkType,inputOutputKey:t.ruleForm.outputWarehouseKey,checkStatus:t.ruleForm.checkStatus,happenTime:t.ruleForm.happenTime,checkNum:t.ruleForm.checkNum,checkTime:p()().format("YYYY-MM-DD HH:mm:ss"),outputWarehouse:{outputWarehouseKey:t.ruleForm.outputWarehouseKey,shopCode:t.ruleForm.shopCode,shopName:t.ruleForm.shopName,goodsCode:t.ruleForm.goodsCode,goodsName:t.ruleForm.goodsName,customerCode:t.ruleForm.customerCode,customerName:t.ruleForm.customerName,outputPlan:t.ruleForm.outputPlan,outputPrice:t.ruleForm.outputPrice,outputActual:t.ruleForm.outputActual,inventoryCode:t.ruleForm.inventoryCode,positionCode:t.ruleForm.positionCode,createTime:t.ruleForm.createTime,deadlineTime:t.ruleForm.deadlineTime,isDeleted:t.ruleForm.isDeleted,vehicleCode:t.ruleForm.vehicleCode,status:t.ruleForm.status,type:t.ruleForm.type,shopPeopleCode:t.ruleForm.shopPeopleCode,inventoryPeopleCode:t.ruleForm.inventoryPeopleCode,returnReason:t.ruleForm.returnReason,returnNum:t.ruleForm.returnNum,outputShopCode:t.ruleForm.outputShopCode,outputShopName:t.ruleForm.outputShopName}};returnCheckAdd(o).then((function(e){if(200==e.data.code)if(1==t.ruleForm.checkStatus){var o=Object(a["a"])({inputOutputKey:t.ruleForm.outputWarehouseKey,shopkeeperWarehouseKey:"",type:0,transType:0==t.ruleForm.type?3:5,quantity:t.ruleForm.checkNum,startNum:"",finalNum:"",atTime:p()().format("YYYY-MM-DD HH:mm:ss"),status:t.rowData.status,detailWarehouseKey:"",shopCode:t.ruleForm.shopCode,goodsCode:t.ruleForm.goodsCode},"status",t.rowData.status);Object(u["h"])(o).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("编辑失败!")}))}else t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate();else t.$message.error("编辑失败!")}))})))}}},m=d,h=(o("bb14"),o("2877")),f=Object(h["a"])(m,r,s,!1,null,null,null);t["a"]=f.exports},"660e":function(e,t,o){},"8ef7":function(e,t,o){"use strict";o("da60")},bb14:function(e,t,o){"use strict";o("660e")},be47:function(e,t,o){},d9e8:function(e,t,o){"use strict";o("be47")},da60:function(e,t,o){},ed94:function(e,t,o){"use strict";o.r(t);o("ac1f"),o("841c");var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#fff",padding:"10px"}},[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig,hidden:e.hidden},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-status",fn:function(o){return[t("span",[e._v(e._s("0"==o.row.status?"在单":"1"==o.row.status?"生产":"2"==o.row.status?"在途":"3"==o.row.status?"入库":"4"==o.row.status?"占用":"5"==o.row.status?"出库":"-"))])]}},{key:"column-type",fn:function(o){return[0==o.row.type?t("span",[e._v("零售")]):e._e(),1==o.row.type?t("span",[e._v("客户订购")]):e._e(),2==o.row.type?t("span",[e._v("调货出库")]):e._e()]}},{key:"column-createTime",fn:function(o){return[o.row.createTime?t("span",[e._v(e._s(e._f("datefmt")(o.row.createTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-deadlineTime",fn:function(o){return[o.row.deadlineTime?t("span",[e._v(e._s(e._f("datefmt")(o.row.deadlineTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-isDeleted",fn:function(o){return[t("span",[e._v(e._s("0"==o.row.isDeleted?"否":"1"==o.row.isDeleted?"是":"-"))])]}},{key:"column-todo",fn:function(o){return[4==o.row.status?t("el-button",{attrs:{type:"text",icon:"el-icon-s-promotion"},on:{click:function(t){return e.editRow1(o.row)}}},[e._v("发货")]):e._e(),t("el-button",{directives:[{name:"show",rawName:"v-show",value:!o.row.returnNum&&5==o.row.status&&o.row.type<2,expression:"!props.row.returnNum && props.row.status == 5 && props.row.type < 2"}],attrs:{type:"text",icon:"el-icon-truck"},on:{click:function(t){return e.editRow2(o.row)}}},[e._v("退货")]),0==e.userType&&0==o.row.isDeleted?t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editRow(o.row)}}},[e._v("编辑")]):e._e(),0==e.userType?t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small",icon:"el-icon-document"},on:{click:function(t){return e.deleteRow(o.row)}}},[e._v("删除")]):e._e()]}}])})],1),e.drawer?t("billsEdit",{attrs:{drawer:e.drawer,rowData:e.rowData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e(),e.drawer1?t("outputOrderEdit",{attrs:{drawer:e.drawer1,rowData:e.rowData1},on:{close:function(t){e.drawer1=!1},success:function(t){return e.success()}}}):e._e(),e.drawer2?t("outputOrderReturn",{attrs:{drawer:e.drawer2,rowData:e.rowData2,ifShow:e.ifShow},on:{close:function(t){e.drawer2=!1},success:function(t){return e.success()}}}):e._e(),e.drawer3?t("MreturnOrderEdit",{attrs:{drawer:e.drawer3,rowData:e.rowData3},on:{close:function(t){e.drawer3=!1},success:function(t){return e.success()}}}):e._e()],1)},s=[],a=(o("d3b7"),o("159b"),o("14d9"),o("b7be")),l=o("c367"),i=o("ffd4"),u=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{size:"30%",title:e.ifCreate?"新增销售单":e.output?"发货":"编辑销售单",visible:e.drawer,direction:e.direction,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,width:"1200px"},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"门店",prop:"shopCode"}},[t("el-select",{ref:"selection",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"",clearable:""},model:{value:e.ruleForm.shopCode,callback:function(t){e.$set(e.ruleForm,"shopCode",t)},expression:"ruleForm.shopCode"}},e._l(e.shopOptions,(function(o){return t("el-option",{key:o.shopKey,attrs:{label:o.shopName,value:o.shopCode,disabled:6!=o.shopStatus&&1!=o.shopStatus},nativeOn:{click:function(t){return e.setShopName(o)}}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"商品",prop:"goodsCode"}},[t("el-select",{ref:"goodsSelect",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"商品",clearable:""},model:{value:e.ruleForm.goodsCode,callback:function(t){e.$set(e.ruleForm,"goodsCode",t)},expression:"ruleForm.goodsCode"}},e._l(e.goodsOptions,(function(o){return t("el-option",{key:o.goodsCode,attrs:{label:o.goodsName,value:o.goodsCode},nativeOn:{click:function(t){return e.setGoodsName(o)}}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"客户",prop:"customerCode"}},[t("el-select",{ref:"customerSelect",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"客户",clearable:"",disabled:""},model:{value:e.ruleForm.customerCode,callback:function(t){e.$set(e.ruleForm,"customerCode",t)},expression:"ruleForm.customerCode"}},e._l(e.customerOptions,(function(o){return t("el-option",{key:o.customerKey,attrs:{label:o.customerName,value:o.customerCode},nativeOn:{click:function(t){return e.setCustomerName.apply(null,arguments)}}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"出库价格",prop:"outputPrice"}},[t("el-input",{attrs:{clearable:"",placeholder:"出库价格",min:0,type:"Number"},model:{value:e.ruleForm.outputPrice,callback:function(t){e.$set(e.ruleForm,"outputPrice",t)},expression:"ruleForm.outputPrice"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"计划出库数",prop:"outputPlan"}},[t("el-input",{attrs:{clearable:"",placeholder:"计划出库数",min:0,type:"Number"},model:{value:e.ruleForm.outputPlan,callback:function(t){e.$set(e.ruleForm,"outputPlan",t)},expression:"ruleForm.outputPlan"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"出库类型",prop:"type"}},[t("el-select",{attrs:{size:"small",placeholder:"出库类型",clearable:"",disabled:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[t("el-option",{attrs:{label:"零售出库",value:0}}),t("el-option",{attrs:{label:"客户订购出库",value:1}}),t("el-option",{attrs:{label:"调货车库",value:2}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"门店操作员",prop:"shopPeopleCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"门店操作员",clearable:""},model:{value:e.ruleForm.shopPeopleCode,callback:function(t){e.$set(e.ruleForm,"shopPeopleCode",t)},expression:"ruleForm.shopPeopleCode"}},e._l(e.userOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userCode}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("span",{staticStyle:{"margin-left":"8%"}},[e._v("起止日期")]),t("el-date-picker",{staticStyle:{width:"310px","margin-left":"10px"},attrs:{type:"daterange",align:"right",size:"large","unlink-panels":"","range-separator":"至","start-placeholder":"预计日期","end-placeholder":"最迟日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.setTime},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1),e.output?t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"仓库",prop:"inventoryCode"}},[t("el-select",{ref:"inventorySelect",staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"仓库",clearable:""},model:{value:e.ruleForm.inventoryCode,callback:function(t){e.$set(e.ruleForm,"inventoryCode",t)},expression:"ruleForm.inventoryCode"}},e._l(e.inventoryOptions,(function(o){return t("el-option",{key:o.inventoryKey,attrs:{label:o.inventoryName,value:o.inventoryCode,disabled:1!=o.status},nativeOn:{click:function(t){return e.setPosition.apply(null,arguments)}}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"库位",prop:"positionCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"库位",clearable:""},model:{value:e.ruleForm.positionCode,callback:function(t){e.$set(e.ruleForm,"positionCode",t)},expression:"ruleForm.positionCode"}},e._l(e.positionOptions,(function(e){return t("el-option",{key:e.positionCode,attrs:{label:e.positionCode,value:e.positionCode,clearable:"",placeholder:"库位"}})})),1)],1)],1)],1):e._e(),e.output?t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"仓库操作员",prop:"inventoryPeopleCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"仓库操作员",clearable:""},model:{value:e.ruleForm.inventoryPeopleCode,callback:function(t){e.$set(e.ruleForm,"inventoryPeopleCode",t)},expression:"ruleForm.inventoryPeopleCode"}},e._l(e.userOptions1,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userCode}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"实际数",prop:"outputActual"}},[t("el-input",{attrs:{clearable:"",placeholder:"实际数",min:0,type:"Number"},model:{value:e.ruleForm.outputActual,callback:function(t){e.$set(e.ruleForm,"outputActual",t)},expression:"ruleForm.outputActual"}})],1)],1)],1):e._e(),e.output?t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"车辆",prop:"vehicleCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"车辆",clearable:""},model:{value:e.ruleForm.vehicleCode,callback:function(t){e.$set(e.ruleForm,"vehicleCode",t)},expression:"ruleForm.vehicleCode"}},e._l(e.vehicleOptions,(function(e){return t("el-option",{key:e.vehicleKey,attrs:{label:e.vehicleCode,value:e.vehicleCode}})})),1)],1)],1)],1):e._e()],1),t("div",{staticClass:"dialog_footer"},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("关闭")])],1)],1)},n=[],c=o("ade3"),p=(o("4ec9"),o("3ca3"),o("ddb0"),o("4de4"),o("7e1e")),d=o("64dc"),m=o("4ec3"),h=o("c1df"),f=o.n(h),v={name:"guestEdit",data:function(){var e;return{direction:"btt",ifCreate:!1,ruleForm:{outputWarehouseKey:"",shopCode:"",shopName:"",goodsCode:"",goodsName:"",customerCode:"",customerName:"",outputPlan:"",outputPrice:"",outputActual:"",inventoryCode:"",positionCode:"",createTime:"",deadlineTime:"",vehicleCode:"",status:"",type:1,shopPeopleCode:"",inventoryPeopleCode:"",isDeleted:"",returnReason:"",returnNum:"",outputShopCode:"",outputShopName:""},availableNum:"",shopOptions:[],goodsOptions:[],positionOptions:[],customerOptions:[],vehicleOptions:[],inventoryOptions:[],userOptions:[],userOptions1:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,o=new Date;t.setTime(t.getTime()+6048e5),e.$emit("pick",[o,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,o=new Date;t.setTime(t.getTime()+2592e6),e.$emit("pick",[o,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,o=new Date;t.setTime(t.getTime()+7776e6),e.$emit("pick",[o,t])}}],disabledDate:function(e){return new Date(e).getTime()<(new Date).getTime()-864e5||new Date(e).getTime()>(new Date).getTime()+15552e6}},value2:"",rules:(e={shopCode:[{required:!0,message:"请选择",trigger:"blur"}],goodsCode:[{required:!0,message:"请选择商品",trigger:"blur"}],customerCode:[{required:!0,message:"请选择客户",trigger:"blur"}],inventoryCode:[{required:!0,message:"请选择仓库",trigger:"blur"}],positionCode:[{required:!0,message:"请选择货位",trigger:"blur"}],outputPlan:[{required:!0,message:"请设置计划出库数",trigger:"blur"}],outputPrice:[{required:!0,message:"请设置出库价格",trigger:"blur"}],outputActual:[{required:!0,message:"请设置实际出库数",trigger:"blur"}],type:[{required:!0,message:"请设置出库类型",trigger:"blur"}]},Object(c["a"])(e,"type",[{required:!0,message:"请设置出库类型",trigger:"blur"}]),Object(c["a"])(e,"shopPeopleCode",[{required:!0,message:"请设置门店操作员",trigger:"blur"}]),Object(c["a"])(e,"inventoryPeopleCode",[{required:!0,message:"请设置仓库操作员",trigger:"blur"}]),e)}},props:{drawer:{default:!0},rowData:{},output:{default:!0}},watch:{},created:function(){this.getshoplist(),this.getCustomerList(),this.getUserList(),this.getvehicleList(),this.rowData.outputWarehouseKey?(this.ruleForm.outputWarehouseKey=this.rowData.outputWarehouseKey,this.ruleForm.shopCode=this.rowData.shopCode,this.ruleForm.shopName=this.rowData.shopName,this.ruleForm.goodsCode=this.rowData.goodsCode,this.ruleForm.goodsName=this.rowData.goodsName,this.ruleForm.customerCode=this.rowData.customerCode,this.ruleForm.customerName=this.rowData.customerName,this.ruleForm.outputPlan=this.rowData.outputPlan,this.ruleForm.outputPrice=this.rowData.outputPrice,this.ruleForm.outputActual=this.rowData.outputActual,this.ruleForm.inventoryCode=this.rowData.inventoryCode,this.ruleForm.positionCode=this.rowData.positionCode,this.ruleForm.createTime=this.rowData.createTime,this.ruleForm.deadlineTime=this.rowData.deadlineTime,this.ruleForm.vehicleCode=this.rowData.vehicleCode,this.ruleForm.isDeleted=this.rowData.isDeleted,this.ruleForm.status=this.rowData.status,this.ruleForm.shopPeopleCode=this.rowData.shopPeopleCode,this.ruleForm.inventoryPeopleCode=this.rowData.inventoryPeopleCode,this.ruleForm.returnReason=this.rowData.returnReason,this.ruleForm.returnNum=this.rowData.returnNum,this.ruleForm.outputShopCode=this.rowData.outputShopCode,this.ruleForm.outputShopName=this.rowData.outputShopName,this.value2=[this.rowData.createTime,this.rowData.deadlineTime],this.getgoodslist(this.rowData)):this.ifCreate=!0,this.getShopInventoryList()},methods:{getvehicleList:function(){var e=this;Object(p["yb"])().then((function(t){200==t.data.code?e.vehicleOptions=t.data.data:e.$message.error("获取失败!")}))},getUserList:function(){var e=this;Object(m["a"])({userType:2}).then((function(t){e.userOptions=t.data.data,e.$forceUpdate()})).catch((function(e){console.log(e)})),Object(m["a"])({userType:1}).then((function(t){e.userOptions1=t.data.data,e.$forceUpdate()})).catch((function(e){console.log(e)}))},unique:function(e){var t=new Map;return e.filter((function(e){return!t.has(e.shopCode)&&t.set(e.shopCode,1)}))},getshoplist:function(){var e=this;Object(d["r"])().then((function(t){200==t.data.code?e.shopOptions=e.unique(t.data.data):e.$message.error("获取失败!")}))},getgoodslist:function(e){var t=this;Object(d["o"])({shopCode:e.shopCode,shopName:e.shopName}).then((function(e){200==e.data.code?t.goodsOptions=e.data.data:t.$message.error("获取失败!")}))},getCustomerList:function(){var e=this;Object(p["e"])().then((function(t){200==t.data.code?e.customerOptions=t.data.data:e.$message.error("获取失败!")}))},getShopInventoryList:function(){var e=this;Object(d["m"])({shopCode:this.ruleForm.shopCode}).then((function(t){200==t.data.code?(e.inventoryOptions=t.data.data,e.getpositionList()):e.$message.error("获取失败!")}))},setShopName:function(e){this.goodsOptions=[],this.getShopInventoryList(),this.ruleForm.shopName=this.$refs.selection.selectedLabel,this.getgoodslist(e)},setCustomerName:function(){var e=this;this.ruleForm.customerName=this.$refs.customerSelect.selectedLabel,this.shopOptions.forEach((function(t){t.goodsCode==t.goodsCode&&t.shopCode==e.ruleForm.shopCode&&(e.availableNum=t.availableNum)}))},setGoodsName:function(e){console.log(this.$refs.goodsSelect.selectedLabel),this.ruleForm.goodsName=this.$refs.goodsSelect.selectedLabel,this.ruleForm.outputPrice=e.priceWholesaler},setPosition:function(){var e=this;this.ruleForm.inventoryName=this.$refs.inventorySelect.selectedLabel;var t=this.inventoryOptions.filter((function(t){return t.inventoryCode==e.ruleForm.inventoryCode}));this.getpositionList(t[0].inventoryKey)},getpositionList:function(){var e=this;this.inventoryOptions.forEach((function(t){t.inventoryCode==e.ruleForm.inventoryCode&&Object(p["hb"])({inventoryKey:t.inventoryKey}).then((function(t){200==t.data.code?e.positionOptions=t.data.data:e.$message.error("获取失败!")}))}))},setTime:function(){this.ruleForm.createTime=this.value2[0],this.ruleForm.deadlineTime=this.value2[1]},close:function(){this.$parent.drawer=!1,this.$emit("close")},save:function(e){var t=this;this.ruleForm.createTime=this.value2[0],this.ruleForm.deadlineTime=this.value2[1],1==this.output?this.ruleForm.status=5:this.ruleForm.status=4,this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var o={shopCode:t.ruleForm.shopCode,shopName:t.ruleForm.shopName,goodsCode:t.ruleForm.goodsCode,goodsName:t.ruleForm.goodsName,customerCode:t.ruleForm.customerCode,customerName:t.ruleForm.customerName,outputPlan:t.ruleForm.outputPlan,outputPrice:t.ruleForm.outputPrice,outputActual:t.ruleForm.outputActual,inventoryCode:t.ruleForm.inventoryCode,positionCode:t.ruleForm.positionCode,createTime:t.ruleForm.createTime,deadlineTime:t.ruleForm.deadlineTime,isDeleted:t.ruleForm.isDeleted,vehicleCode:t.ruleForm.vehicleCode,status:t.ruleForm.status,type:t.ruleForm.type,shopPeopleCode:t.ruleForm.shopPeopleCode,inventoryPeopleCode:t.ruleForm.inventoryPeopleCode,returnReason:t.ruleForm.returnReason,returnNum:t.ruleForm.returnNum,outputShopCode:t.ruleForm.outputShopCode,outputShopName:t.ruleForm.outputShopName,outputWarehouseKey:t.ruleForm.outputWarehouseKey};Object(a["f"])(o).then((function(e){if(200==e.data.code)if(5==t.ruleForm.status){var o={inputOutputKey:e.data.data.outputWarehouseKey,shopkeeperWarehouseKey:"",type:1,transType:4,quantity:t.ruleForm.outputActual,startNum:"",finalNum:"",atTime:f()().format("YYYY-MM-DD HH:mm:ss"),status:t.rowData.status,detailWarehouseKey:"",shopCode:t.ruleForm.shopCode,goodsCode:t.ruleForm.goodsCode};Object(d["h"])(o).then((function(e){t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()}))}else t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate();else t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;this.ruleForm.createTime=this.value2[0],this.ruleForm.deadlineTime=this.value2[1],1==this.output?this.ruleForm.status=5:this.ruleForm.status=4,this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var o={shopCode:t.ruleForm.shopCode,shopName:t.ruleForm.shopName,goodsCode:t.ruleForm.goodsCode,goodsName:t.ruleForm.goodsName,customerCode:t.ruleForm.customerCode,customerName:t.ruleForm.customerName,outputPlan:t.ruleForm.outputPlan,outputPrice:t.ruleForm.outputPrice,outputActual:t.ruleForm.outputActual,inventoryCode:t.ruleForm.inventoryCode,positionCode:t.ruleForm.positionCode,createTime:t.ruleForm.createTime,deadlineTime:t.ruleForm.deadlineTime,vehicleCode:t.ruleForm.vehicleCode,status:t.ruleForm.status,isDeleted:t.ruleForm.isDeleted,type:t.ruleForm.type,shopPeopleCode:t.ruleForm.shopPeopleCode,inventoryPeopleCode:t.ruleForm.inventoryPeopleCode,returnNum:t.ruleForm.returnNum,outputShopCode:t.ruleForm.outputShopCode,outputShopName:t.ruleForm.outputShopName,returnReason:t.ruleForm.returnReason};Object(a["a"])(o).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}))}}},y=v,b=(o("8ef7"),o("2877")),C=Object(b["a"])(y,u,n,!1,null,null,null),F=C.exports,g=o("0510"),w=o("d9cc"),D=o("70b6"),N=o("15d4"),k={name:"slist",data:function(){return{total:null,hidden:!0,drawer:!1,rowData:{},drawer1:!1,rowData1:{},drawer2:!1,rowData2:{},drawer3:!1,rowData3:{},tableData:[],ifShow:!1,multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10},userType:"",shopOptions:[],goodsOptions:[],inventoryOptions:[],customerOptions:[],statusOptions:[{label:"占用",value:4},{label:"出库",value:5}],typeOptions:[{label:"零售出库",value:0},{label:"客户订购出库",value:1},{label:"调货出库",value:2}]}},computed:{tableColumn:function(){return[{prop:"shopCode",label:"门店编码"},{prop:"shopName",label:"门店名称"},{prop:"goodsCode",label:"商品编码"},{prop:"goodsName",label:"商品名称"},{prop:"customerCode",label:"客户编码"},{prop:"customerName",label:"客户名称"},{prop:"outputShopCode",label:"调往门店编码"},{prop:"outputShopName",label:"调往门店名称"},{prop:"inventoryCode",label:"仓库编码"},{prop:"positionCode",label:"货位编码"},{prop:"vehicleCode",label:"车辆编码"},{slots:{name:"column-status"},label:"状态"},{slots:{name:"column-type"},label:"出库类型"},{prop:"shopPeopleCode",label:"门店操作员"},{prop:"inventoryPeopleCode",label:"仓库操作员"},{prop:"outputPlan",label:"计划数"},{prop:"outputPrice",label:"出库价格"},{prop:"outputActual",label:"实际数"},{prop:"returnNum",label:"退货数"},{prop:"returnReason",label:"退货原因"},{slots:{name:"column-createTime"},label:"预计日期"},{slots:{name:"column-deadlineTime"},label:"最迟日期"},{slots:{name:"column-todo"},label:"操作",fixed:"right",width:200}]},searchConfig:function(){return[{label:"请选择",placeholder:"请选择门店",field:"shopCode",value:"",type:"select",options:this.shopOptions},{label:"请选择",placeholder:"请选择商品",field:"goodsCode",value:"",type:"select",options:this.goodsOptions},{label:"请选择",placeholder:"请选择仓库",field:"inventoryCode",value:"",type:"select",options:this.inventoryOptions},{label:"请选择",placeholder:"请选择客户",field:"customerCode",value:"",type:"select",options:this.customerOptions},{label:"请选择",placeholder:"请选择状态",field:"status",value:"",type:"select",options:this.statusOptions},{label:"请选择",placeholder:"请选择类型",field:"type",value:"",type:"select",options:this.typeOptions}]}},props:{},components:{TableList:l["a"],billsEdit:F,MreturnOrderEdit:g["a"],outputOrderEdit:w["a"],outputOrderReturn:D["a"],reloadAndsearch:i["a"]},created:function(){this.getshoplist(),this.getgoodslist(),this.getCustomerList(),this.getinventorylist();var e=JSON.parse(localStorage.getItem("userInfo"));this.userType=e.userType},methods:{getCustomerList:function(){var e=this;Object(p["e"])().then((function(t){200==t.data.code?(e.customerOptions=[],t.data.data.forEach((function(t){e.customerOptions.push({label:t.customerName,value:t.customerCode})}))):e.$message.error("获取失败!")}))},getinventorylist:function(){var e=this;Object(p["cb"])().then((function(t){200===t.data.code?(e.inventoryOptions=[],t.data.data.forEach((function(t){("2"==t.inventoryType&&null!=t.belongKey||""!=t.belongKey)&&e.inventoryOptions.push({label:t.inventoryName,value:t.inventoryCode})}))):e.$message.error(t.msg)})).catch((function(e){console.log(e)}))},getshoplist:function(){var e=this;Object(p["ob"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.shopOptions.push({label:t.shopName,value:t.shopCode})})):e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(p["W"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.goodsOptions.push({label:t.goodsName,value:t.goodsCode})})):e.$message.error("获取失败!")}))},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,o&&(this.query.pageSize=o),this.loadings.table=!0;var r={page:this.query.pageNo,size:this.query.pageSize,shopCode:"",goodsCode:"",customerCode:"",inventoryCode:"",status:"",isDeleted:0,type:""};Object(a["e"])(r).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,o&&(this.query.pageSize=o);var r=this.$refs.search.search;Object(a["e"])({page:this.query.pageNo,size:this.query.pageSize,shopCode:r.shopCode,goodsCode:r.goodsCode,customerCode:r.customerCode,inventoryCode:r.inventoryCode,status:r.status,isDeleted:0,type:r.type}).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},editRow:function(e){this.rowData=e,this.drawer=!0},editRow1:function(e){this.rowData1=e,this.drawer1=!0},editRow2:function(e){var t=this;Object(N["b"])({checkType:1,inputOutputKey:e.outputWarehouseKey}).then((function(o){200==o.data.code&&null!=o.data.data?(t.rowData2=o.data.data,t.drawer2=!0,console.log(t.rowData2)):(t.rowData2=e,t.drawer2=!0)}))},editRow3:function(e){var t=this;Object(N["b"])({checkType:1,inputOutputKey:e.outputWarehouseKey}).then((function(e){200==e.data.code?(t.rowData3=e.data.data,console.log(t.rowData),t.drawer3=!0):t.$message.error("获取失败!")}))},deleteRow:function(e){var t=this;this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["b"])({outputWarehouseKey:e.outputWarehouseKey,isDeleted:1}).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("删除失败!")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},success:function(){this.drawer=!1,this.rowData={},this.drawer1=!1,this.rowData1={},this.drawer2=!1,this.rowData2={},this.drawer3=!1,this.rowData3={},this.getTableData()},reload:function(){this.getTableData()},add:function(){this.rowData={},this.drawer=!0},handleSelectionDelete:function(e){this.multipleSelection=e},handleDeleteList:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push({outputWarehouseKey:e.outputWarehouseKey,isDeleted:1})})),console.log(t),this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["c"])(t).then((function(){e.getTableData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.multipleSelection=[]}))}else this.$message({type:"error",message:"至少选择一项"})}}},O=k,S=(o("d9e8"),Object(b["a"])(O,r,s,!1,null,"0aa9b4aa",null));t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-2a5c5b97.c1ed8e5a.js.map