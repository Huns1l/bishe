(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0acfaed2"],{"0a71":function(e,t,r){"use strict";r("144b")},"144b":function(e,t,r){},"4ec3":function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return h})),r.d(t,"f",(function(){return p}));r("751a");var o=r("4328"),a=r.n(o),n=r("b775"),c="/api";function s(e){return Object(n["a"])({url:c+"/user/list",method:"get",params:a.a.parse(e)})}function u(e){return Object(n["a"])({url:c+"/user/selectUserPage",method:"get",params:a.a.parse(e)})}function l(e){return Object(n["a"])({url:c+"/user/createUser",method:"post",data:a.a.parse(e)})}function i(e){return Object(n["a"])({url:c+"/user/deleteUserById",method:"get",params:a.a.parse(e)})}function h(e){return Object(n["a"])({url:c+"/user/deleteUserByIdList",method:"get",params:a.a.parse(e)})}function p(e){return Object(n["a"])({url:c+"/user/updateUserById",method:"post",data:a.a.parse(e)})}},"64dc":function(e,t,r){"use strict";r.d(t,"x",(function(){return n})),r.d(t,"y",(function(){return c})),r.d(t,"u",(function(){return s})),r.d(t,"g",(function(){return u})),r.d(t,"v",(function(){return l})),r.d(t,"w",(function(){return i})),r.d(t,"m",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"d",(function(){return d})),r.d(t,"a",(function(){return m})),r.d(t,"f",(function(){return f})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return k})),r.d(t,"o",(function(){return g})),r.d(t,"s",(function(){return y})),r.d(t,"r",(function(){return v})),r.d(t,"n",(function(){return O})),r.d(t,"t",(function(){return S})),r.d(t,"p",(function(){return T})),r.d(t,"q",(function(){return w})),r.d(t,"k",(function(){return F})),r.d(t,"h",(function(){return j})),r.d(t,"l",(function(){return C})),r.d(t,"i",(function(){return D})),r.d(t,"j",(function(){return P}));var o=r("b775"),a=(r("4328"),"/api");function n(e){return Object(o["a"])({url:a+"/SupplierInventory/list",method:"get",params:e})}function c(e){return Object(o["a"])({url:a+"/SupplierInventory/list-page",method:"get",params:e})}function s(e){return Object(o["a"])({url:a+"/SupplierInventory/add",method:"POST",data:e})}function u(e){return Object(o["a"])({url:a+"/SupplierInventory/update",method:"POST",data:e})}function l(e){return Object(o["a"])({url:a+"/SupplierInventory/delete",method:"POST",data:e})}function i(e){return Object(o["a"])({url:a+"/SupplierInventory/delete-list",method:"POST",data:e})}function h(e){return Object(o["a"])({url:a+"/ShopInventory/getByshopCode",method:"get",params:e})}function p(e){return Object(o["a"])({url:a+"/ShopInventory/list-page",method:"get",params:e})}function d(e){return Object(o["a"])({url:a+"/ShopInventory/list",method:"get",params:e})}function m(e){return Object(o["a"])({url:a+"/ShopInventory/add",method:"POST",data:e})}function f(e){return Object(o["a"])({url:a+"/ShopInventory/update",method:"POST",data:e})}function b(e){return Object(o["a"])({url:a+"/ShopInventory/delete",method:"POST",data:e})}function k(e){return Object(o["a"])({url:a+"/ShopInventory/delete-list",method:"POST",data:e})}function g(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/getByShopCode",method:"get",params:e})}function y(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/list-page",method:"get",params:e})}function v(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/list",method:"get",params:e})}function O(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/add",method:"POST",data:e})}function S(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/update",method:"POST",data:e})}function T(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/delete",method:"POST",data:e})}function w(e){return Object(o["a"])({url:a+"/shopkeeperWarehouse/delete-list",method:"POST",data:e})}function F(e){return Object(o["a"])({url:a+"/detailWarehouse/list-page",method:"get",params:e})}function j(e){return Object(o["a"])({url:a+"/detailWarehouse/add",method:"POST",data:e})}function C(e){return Object(o["a"])({url:a+"/detailWarehouse/update",method:"POST",data:e})}function D(e){return Object(o["a"])({url:a+"/detailWarehouse/delete",method:"POST",data:e})}function P(e){return Object(o["a"])({url:a+"/detailWarehouse/delete-list",method:"POST",data:e})}},"751a":function(e,t,r){"use strict";r("b775")},9332:function(e,t,r){},bc5d:function(e,t,r){"use strict";r.r(t);r("ac1f"),r("841c");var o=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#fff",padding:"10px"}},[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig,hidden:e.hidden,hidden1:e.hidden},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,multiCheck:e.multiCheck,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-how",fn:function(r){return[0==r.row.checkType?t("span",[e._v("盘盈")]):1==r.row.checkType?t("span",[e._v("盘亏")]):t("span",[e._v("-")])]}},{key:"column-happenTime",fn:function(r){return[r.row.happenTime?t("span",[e._v(e._s(e._f("datefmt")(r.row.happenTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-checkTime",fn:function(r){return[r.row.checkTime?t("span",[e._v(e._s(e._f("datefmt")(r.row.checkTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-much",fn:function(r){return[0==r.row.checkType?t("span",[e._v("+"+e._s(r.row.checkNum))]):1==r.row.checkType?t("span",[e._v("-"+e._s(r.row.checkNum))]):t("span",[e._v("-")])]}},{key:"column-status",fn:function(r){return[t("span",[e._v(e._s("0"==r.row.checkStatus?"未审批":"1"==r.row.checkStatus?"同意":"2"==r.row.checkStatus?"驳回":"-"))])]}},{key:"column-todo",fn:function(r){return[t("el-button",{staticStyle:{visibility:"hidden"},attrs:{type:"text"}},[e._v("空")]),1!=r.row.checkStatus?t("el-button",{attrs:{type:"text",icon:"el-icon-s-check"},on:{click:function(t){return e.editRow(r.row)}}},[e._v("审批")]):e._e()]}}])})],1),e.drawer?t("countCheckEdit",{attrs:{drawer:e.drawer,rowData:e.rowData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e()],1)},a=[],n=(r("d3b7"),r("159b"),r("14d9"),r("c367")),c=r("ffd4"),s=(r("a4d3"),r("e01a"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{size:"30%",title:e.ifCreate?"新增":"盘点审批",visible:e.drawer,direction:e.direction,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,width:"1200px"},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"关联库存",prop:"shopkeeperWarehouseKey"}},[t("el-input",{attrs:{clearable:"",placeholder:"关联库存",disabled:""},model:{value:e.ruleForm.shopkeeperWarehouseKey,callback:function(t){e.$set(e.ruleForm,"shopkeeperWarehouseKey",t)},expression:"ruleForm.shopkeeperWarehouseKey"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批数",prop:"checkNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"审批数",type:"Number",min:0,disabled:""},model:{value:e.ruleForm.checkNum,callback:function(t){e.$set(e.ruleForm,"checkNum",t)},expression:"ruleForm.checkNum"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批类型",prop:"checkType"}},[t("el-select",{attrs:{size:"mini",placeholder:"审批类型",clearable:"",disabled:""},model:{value:e.ruleForm.checkType,callback:function(t){e.$set(e.ruleForm,"checkType",t)},expression:"ruleForm.checkType"}},[t("el-option",{attrs:{label:"盘盈",value:0}}),t("el-option",{attrs:{label:"盘亏",value:1}})],1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批人",prop:"checkPeople"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"审批人",clearable:""},model:{value:e.ruleForm.checkPeople,callback:function(t){e.$set(e.ruleForm,"checkPeople",t)},expression:"ruleForm.checkPeople"}},e._l(e.checkPeopleOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userCode}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批结果",prop:"checkStatus"}},[t("el-select",{attrs:{size:"small",placeholder:"审批结果",clearable:""},model:{value:e.ruleForm.checkStatus,callback:function(t){e.$set(e.ruleForm,"checkStatus",t)},expression:"ruleForm.checkStatus"}},[t("el-option",{attrs:{label:"未审批",value:0,disabled:""}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-minus"}),e._v(" 未审批 ")])]),t("el-option",{attrs:{label:"同意",value:1}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-check"}),e._v(" 同意 ")])]),t("el-option",{attrs:{label:"驳回",value:2}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-close"}),e._v(" 驳回 ")])])],1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批意见",prop:"description"}},[t("el-input",{attrs:{clearable:"",placeholder:"审批意见",type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1)],1)],1),t("div",{staticClass:"dialog_footer"},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("提交审核")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("取消")])],1)],1)}),u=[],l=r("d417"),i=r("c1df"),h=r.n(i),p=r("4ec3"),d=r("64dc"),m={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,ruleForm:{countCheckKey:"",happenTime:"",shopkeeperWarehouseKey:"",checkStatus:"",checkTime:h()().format("YYYY-MM-DD HH:mm:ss"),checkType:"",checkNum:"",description:"",checkPeople:""},checkPeopleOptions:[],rules:{description:[{required:!0,message:"请输入审批意见",trigger:"blur"}],checkStatus:[{required:!0,message:"请审批",trigger:"blur"}],checkPeople:[{required:!0,message:"请选择审批人",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{},shopGoodsList:[]},watch:{},created:function(){console.log(this.rowData),this.getUserList(),this.rowData.countCheckKey?(this.ruleForm.countCheckKey=this.rowData.countCheckKey,this.ruleForm.happenTime=this.rowData.happenTime,this.ruleForm.shopkeeperWarehouseKey=this.rowData.shopkeeperWarehouseKey,this.ruleForm.checkStatus=this.rowData.checkStatus,this.ruleForm.checkType=this.rowData.checkType,this.ruleForm.checkNum=this.rowData.checkNum,this.ruleForm.description=this.rowData.description,this.ruleForm.checkPeople=this.rowData.checkPeople):this.ifCreate=!0},methods:{getUserList:function(){var e=this;Object(p["a"])({userType:1}).then((function(t){e.checkPeopleOptions=t.data.data})).catch((function(e){console.log(e)}))},close:function(){this.$parent.drawer=!1},save:function(e){var t=this;0==this.ruleForm.checkStatus?this.$message.error("请选择同意或驳回!"):this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(l["e"])(t.ruleForm).then((function(e){if(200==e.data.code)if(1==t.ruleForm.checkStatus){var r={inputOutputKey:t.ruleForm.countCheckKey,shopkeeperWarehouseKey:t.ruleForm.shopkeeperWarehouseKey,type:t.ruleForm.checkType,transType:0==t.ruleForm.checkType?8:9,quantity:t.ruleForm.checkNum,startNum:t.ruleForm.startNum,finalNum:t.ruleForm.finalNum,atTime:h()().format("YYYY-MM-DD HH:mm:ss"),status:"",detailWarehouseKey:""};Object(d["h"])(r).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}else t.$message.success("新增成功!"),t.$parent.success();else t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;0==this.ruleForm.checkStatus?this.$message.error("请选择同意或驳回!"):this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r={countCheckKey:t.ruleForm.countCheckKey,happenTime:t.ruleForm.happenTime,shopkeeperWarehouseKey:t.ruleForm.shopkeeperWarehouseKey,checkStatus:t.ruleForm.checkStatus,checkTime:t.ruleForm.checkTime,checkType:t.ruleForm.checkType,checkNum:t.ruleForm.checkNum,description:t.ruleForm.description,checkPeople:t.ruleForm.checkPeople};Object(l["a"])(r).then((function(e){if(200==e.data.code)if(1==t.ruleForm.checkStatus){var r={inputOutputKey:t.ruleForm.countCheckKey,shopkeeperWarehouseKey:t.ruleForm.shopkeeperWarehouseKey,type:t.ruleForm.checkType,transType:0==t.ruleForm.checkType?8:9,quantity:t.ruleForm.checkNum,startNum:t.ruleForm.startNum,finalNum:t.ruleForm.finalNum,atTime:h()().format("YYYY-MM-DD HH:mm:ss"),status:"",detailWarehouseKey:""};Object(d["h"])(r).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}else t.$message.success("新增成功!"),t.$parent.success();else t.$message.error("新增失败!")}))}))}}},f=m,b=(r("f0f4"),r("2877")),k=Object(b["a"])(f,s,u,!1,null,null,null),g=k.exports,y=r("7e1e"),v={name:"slist",data:function(){return{pageSize:10,pageNo:1,total:null,drawer:!1,multiCheck:!1,hidden:!0,rowData:{},tableData:[],multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10},checkTypeOptions:[{label:"盘盈",value:0},{label:"盘亏",value:1}],checkPeopleOptions:[],checkStatusOptions:[{label:"未审批",value:0},{label:"同意",value:1},{label:"驳回",value:2}],shopOptions:[],goodsOptions:[]}},computed:{tableColumn:function(){return[{prop:"shopCode",label:"门店编码"},{prop:"goodsCode",label:"商品编码"},{slots:{name:"column-how"},label:"审批类型"},{slots:{name:"column-much"},label:"审批数量"},{slots:{name:"column-happenTime"},label:"申请时间"},{slots:{name:"column-status"},label:"审批状态"},{prop:"description",label:"审批意见"},{slots:{name:"column-checkTime"},label:"审批时间"},{slots:{name:"column-todo"},label:"操作",fixed:"right",width:"120px"}]},searchConfig:function(){return[{label:"请选择",placeholder:"请选择门店",field:"shopCode",value:"",type:"select",options:this.shopOptions},{label:"请选择",placeholder:"请选择商品",field:"goodsCode",value:"",type:"select",options:this.goodsOptions},{label:"请选择",placeholder:"请选择审批类型",field:"checkType",value:"",type:"select",options:this.checkTypeOptions},{label:"请选择",placeholder:"请选择审批状态",field:"checkStatus",value:"",type:"select",options:this.checkStatusOptions},{label:"请选择",placeholder:"请选择审批人",field:"checkPeople",value:"",type:"select",options:this.checkPeopleOptions}]}},props:{},components:{TableList:n["a"],countCheckEdit:g,reloadAndsearch:c["a"]},created:function(){this.getUserList(),this.getshoplist(),this.getgoodslist()},methods:{getshoplist:function(){var e=this;Object(y["nb"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.shopOptions.push({label:t.shopName,value:t.shopCode})})):e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(y["V"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.goodsOptions.push({label:t.goodsName,value:t.goodsCode})})):e.$message.error("获取失败!")}))},getUserList:function(){var e=this;Object(p["a"])({userType:1}).then((function(t){e.checkPeopleOptions=[],t.data.data.forEach((function(t){e.checkPeopleOptions.push({label:t.userName,value:t.userCode})}))})).catch((function(e){console.log(e)}))},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,r&&(this.query.pageSize=r),this.loadings.table=!0;var o={page:this.query.pageNo,size:this.query.pageSize,checkStatus:"",checkType:"",checkPeople:"",shopCode:"",goodsCode:""};Object(l["d"])(o).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,r&&(this.query.pageSize=r);var o=this.$refs.search.search;Object(l["d"])({checkStatus:o.checkStatus,checkType:o.checkType,checkPeople:o.checkPeople,shopCode:o.shopCode,goodsCode:o.goodsCode,page:this.query.pageNo,size:this.query.pageSize}).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},editRow:function(e){this.rowData=e,this.drawer=!0},deleteRow:function(e){var t=this;console.log("deleteRow",e),shopkeeperWarehouseDelete({belongKey:e.belongKey,inventoryKey:e.inventoryKey}).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("删除失败!")}))},success:function(){this.drawer=!1,this.rowData={},this.getTableData(),this.$forceUpdate()},reload:function(){this.getTableData()},add:function(){this.rowData={},this.drawer=!0},handleSelectionDelete:function(e){this.multipleSelection=e},handleDeleteList:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push({shopkeeperWarehouseKey:e.shopkeeperWarehouseKey})})),console.log(t),this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){shopkeeperWarehouseDeleteList(t).then((function(){e.getTableData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.multipleSelection=[]}))}else this.$message({type:"error",message:"至少选择一项"})}}},O=v,S=(r("0a71"),Object(b["a"])(O,o,a,!1,null,"cc98815c",null));t["default"]=S.exports},d417:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return h})),r.d(t,"h",(function(){return p}));var o=r("b775"),a=(r("4328"),"/api");function n(e){return Object(o["a"])({url:a+"/countCheck/getById",method:"get",params:e})}function c(e){return Object(o["a"])({url:a+"/countCheck/list-page",method:"get",params:e})}function s(e){return Object(o["a"])({url:a+"/countCheck/list",method:"get",params:e})}function u(e){return Object(o["a"])({url:a+"/countCheck/add",method:"POST",data:e})}function l(e){return Object(o["a"])({url:a+"/countCheck/update",method:"POST",data:e})}function i(e){return Object(o["a"])({url:a+"/purchaseIntegrate/list-page",method:"get",params:e})}function h(e){return Object(o["a"])({url:a+"/salesIntegrate/list-page",method:"get",params:e})}function p(e){return Object(o["a"])({url:a+"/transferIntegrate/list-page",method:"get",params:e})}},f0f4:function(e,t,r){"use strict";r("9332")}}]);
//# sourceMappingURL=chunk-0acfaed2.5f6a68a2.js.map