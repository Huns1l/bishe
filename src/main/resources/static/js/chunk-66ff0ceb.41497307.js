(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66ff0ceb"],{"0f7b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrap-definition"},[t("entityList",{ref:"entityList"})],1)},n=[],r=(a("ac1f"),a("841c"),function(){var e=this,t=e._self._c;return t("div",[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-todo",fn:function(a){return[t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small"},on:{click:function(t){return e.editRow(a.row)}}},[e._v("编辑")]),t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteRow(a.row)}}},[e._v("删除")])]}}])}),e.drawer?t("entityEdit",{attrs:{drawer:e.drawer,rowData:e.rowData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e()],1)],1)}),i=[],l=a("5530"),s=(a("d3b7"),a("159b"),a("14d9"),function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{size:"30%",title:e.ifCreate?"新增业务主体":"编辑业务主体",visible:e.drawer,direction:e.direction,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[t("el-row",[t("el-row",[t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"业务主体编号",prop:"entityCode"}},[0==e.ifCreate?t("el-input",{staticClass:"readonly-copy",attrs:{placeholder:"业务主体编号",readonly:""},model:{value:e.ruleForm.entityCode,callback:function(t){e.$set(e.ruleForm,"entityCode",t)},expression:"ruleForm.entityCode"}}):t("el-input",{attrs:{clearable:"",placeholder:"业务主体编号"},model:{value:e.ruleForm.entityCode,callback:function(t){e.$set(e.ruleForm,"entityCode",t)},expression:"ruleForm.entityCode"}})],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"业务主体名称",prop:"entityName"}},[t("el-input",{attrs:{clearable:"",placeholder:"业务主体名称"},model:{value:e.ruleForm.entityName,callback:function(t){e.$set(e.ruleForm,"entityName",t)},expression:"ruleForm.entityName"}})],1)],1)],1)],1),t("el-row",[t("el-form-item",{staticStyle:{display:"inline-block",float:"right",margin:"10px 40%"}},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("关闭")])],1)],1)],1)],1)}),c=[],u=a("7e1e"),d={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,ruleForm:{entityName:"",entityCode:""},rules:{entityName:[{required:!0,message:"请输入业务主体名称",trigger:"blur"}],entityCode:[{required:!0,message:"请输入业务主体编号",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{}},watch:{},created:function(){this.rowData.entityCode?(this.ruleForm.entityName=this.rowData.entityName,this.ruleForm.entityCode=this.rowData.entityCode):this.ifCreate=!0},methods:{close:function(){this.$parent.drawer=!1},save:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(u["P"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(u["L"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}))}}},f=d,p=(a("a88c"),a("2877")),h=Object(p["a"])(f,s,c,!1,null,null,null),m=h.exports,b=a("c367"),y=a("ffd4"),g={name:"slist",data:function(){return{pageSize:10,pageNo:1,total:null,drawer:!1,rowData:{},entityList:[],tableData:[],multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10,keyword:""}}},created:function(){},computed:{tableColumn:function(){return[{prop:"entityCode",label:"业务主体编码"},{prop:"entityName",label:"业务主体名称"},{slots:{name:"column-todo"},label:"操作",fixed:"right"}]},searchConfig:function(){return[{label:"业务主体编码",placeholder:"请输入业务主体编码",field:"entityCode",value:"",type:"input"},{label:"业务主体名称",placeholder:"请输入业务主体名称",field:"entityName",value:"",type:"input"}]}},props:{},components:{entityEdit:m,TableList:b["a"],reloadAndsearch:y["a"]},methods:{getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,a&&(this.query.pageSize=a),this.loadings.table=!0;var o={page:this.query.pageNo,size:this.query.pageSize,entityName:"",entityCode:""};Object(u["O"])(o).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,a&&(this.query.pageSize=a);var o=this.$refs.search.search;Object(u["O"])(Object(l["a"])(Object(l["a"])({},o),{},{page:this.query.pageNo,size:this.query.pageSize})).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},deleteRow:function(e){var t=this;console.log("deleteRow",e),Object(u["M"])({entityCode:e.entityCode}).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("删除失败!")}))},editRow:function(e){console.log("edit"),this.rowData=e,this.drawer=!0},success:function(){this.drawer=!1,this.rowData={},this.getTableData()},reload:function(){this.getTableData()},add:function(){this.editRow({})},handleSelectionDelete:function(e){this.multipleSelection=e},handleDeleteList:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push({entityCode:e.entityCode})})),console.log(t),this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["N"])(t).then((function(){e.getTableData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.multipleSelection=[]}))}else this.$message({type:"error",message:"至少选择一项"})}}},w=g,v=(a("7db9"),Object(p["a"])(w,r,i,!1,null,"5d5bb91a",null)),C=v.exports,D={name:"entity",data:function(){return{}},props:{},methods:{},watch:{},created:function(){},computed:{},mounted:function(){},beforeDestroy:function(){},components:{entityList:C}},$=D,F=(a("8c24"),Object(p["a"])($,o,n,!1,null,"aecdfb1c",null));t["default"]=F.exports},"6dff":function(e,t,a){},"7db9":function(e,t,a){"use strict";a("ca74")},"8c24":function(e,t,a){"use strict";a("6dff")},"9eb1":function(e,t,a){},a88c:function(e,t,a){"use strict";a("9eb1")},ca74:function(e,t,a){}}]);
//# sourceMappingURL=chunk-66ff0ceb.41497307.js.map