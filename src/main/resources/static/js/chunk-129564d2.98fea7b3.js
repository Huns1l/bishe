(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-129564d2"],{"0099":function(e,t,r){"use strict";r.r(t);r("ac1f"),r("841c");var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#fff",padding:"10px"}},[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-type",fn:function(r){return[t("span",[e._v(e._s(0==r.row.type?"入库/总量增加":1==r.row.type?"出库/总量减少":"-"))])]}},{key:"column-transType",fn:function(r){return[t("span",[e._v(e._s(0==r.row.transType?"采购入库":1==r.row.transType?"采购退货出库":2==r.row.transType?"零售出库":3==r.row.transType?"零售退货入库":4==r.row.transType?"客户订购出库":5==r.row.transType?"客户订购退货入库":6==r.row.transType?"调货入库":7==r.row.transType?"调货出库":8==r.row.transType?"盘盈入库":9==r.row.transType?"盘亏出库":"-"))])]}},{key:"column-quantity",fn:function(r){return[0==r.row.transType||3==r.row.transType||5==r.row.transType||6==r.row.transType||8==r.row.transType?t("span",[e._v("+"+e._s(r.row.quantity))]):t("span",[e._v("-"+e._s(r.row.quantity))])]}},{key:"column-atTime",fn:function(r){return[r.row.atTime?t("span",[e._v(e._s(e._f("datefmt")(r.row.atTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-todo",fn:function(r){return[t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editRow(r.row)}}},[e._v("编辑")]),t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small",icon:"el-icon-document"},on:{click:function(t){return e.deleteRow(r.row)}}},[e._v("删除")])]}}])})],1),e.drawer?t("warehouseEdit",{attrs:{drawer:e.drawer,rowData:e.rowData,shopGoodsList:e.tableData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e()],1)},o=[],n=(r("d3b7"),r("159b"),r("14d9"),r("64dc")),u=r("c367"),l=r("ffd4"),s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{size:"30%",title:e.ifCreate?"新增":"编辑",visible:e.drawer,direction:e.direction,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,width:"1200px"},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"订单类型",prop:"tempType"}},[t("el-select",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{size:"mini",placeholder:"订单类型",clearable:""},on:{change:function(t){return e.getOptions()}},model:{value:e.ruleForm.tempType,callback:function(t){e.$set(e.ruleForm,"tempType",t)},expression:"ruleForm.tempType"}},[t("el-option",{attrs:{label:"采购订单",value:"input_warehouse"}}),t("el-option",{attrs:{label:"销售订单",value:"output_warehouse"}})],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"变化类型",prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"变化类型",clearable:""},model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.key,attrs:{label:e.label,value:e.value,clearable:"",placeholder:"变化类型"}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"交易类型",prop:"transType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"交易类型",clearable:""},model:{value:e.ruleForm.transType,callback:function(t){e.$set(e.ruleForm,"transType",t)},expression:"ruleForm.transType"}},e._l(e.transTypeOptions,(function(e){return t("el-option",{key:e.key,attrs:{label:e.label,value:e.value,clearable:"",placeholder:"交易类型"}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"订单编号",prop:"inputOutputKey"}},[e.isShow?t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"所属订单编号",clearable:""},model:{value:e.ruleForm.inputOutputKey,callback:function(t){e.$set(e.ruleForm,"inputOutputKey",t)},expression:"ruleForm.inputOutputKey"}},e._l(e.inputOptions,(function(e){return t("el-option",{key:e.inputWarehouseKey,attrs:{label:e.inputWarehouseKey,value:e.inputWarehouseKey}})})),1):t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"所属订单编号",clearable:""},model:{value:e.ruleForm.inputOutputKey,callback:function(t){e.$set(e.ruleForm,"inputOutputKey",t)},expression:"ruleForm.inputOutputKey"}},e._l(e.outputOptions,(function(e){return t("el-option",{key:e.outputWarehouseKey,attrs:{label:e.outputWarehouseKey,value:e.outputWarehouseKey}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"关联库存",prop:"shopkeeperWarehouseKey"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"关联库存",clearable:""},model:{value:e.ruleForm.shopkeeperWarehouseKey,callback:function(t){e.$set(e.ruleForm,"shopkeeperWarehouseKey",t)},expression:"ruleForm.shopkeeperWarehouseKey"}},e._l(e.shopkeeperWarehouseOptions,(function(e){return t("el-option",{key:e.shopkeeperWarehouseKey,attrs:{label:e.shopkeeperWarehouseKey,value:e.shopkeeperWarehouseKey}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"起始库存",prop:"startNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"起始库存",min:0,type:"Number"},model:{value:e.ruleForm.startNum,callback:function(t){e.$set(e.ruleForm,"startNum",t)},expression:"ruleForm.startNum"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"变化数量",prop:"quantity"}},[t("el-input",{attrs:{clearable:"",placeholder:"变化数量",min:0,type:"Number"},model:{value:e.ruleForm.quantity,callback:function(t){e.$set(e.ruleForm,"quantity",t)},expression:"ruleForm.quantity"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"结余库存",prop:"finalNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"结余库存",min:0,type:"Number"},model:{value:e.ruleForm.finalNum,callback:function(t){e.$set(e.ruleForm,"finalNum",t)},expression:"ruleForm.finalNum"}})],1)],1)],1)],1),t("div",{staticClass:"dialog_footer"},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("关闭")])],1)],1)},i=[],p=r("972b"),c=r("b7be"),d=r("c1df"),h=r.n(d),m={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,isShow:!0,ruleForm:{tempType:"",inputOutputKey:"",shopkeeperWarehouseKey:"",type:"",transType:"",quantity:"",startNum:"",finalNum:"",atTime:"",detailWarehouseKey:""},inputOptions:[],outputOptions:[],shopkeeperWarehouseOptions:[],transTypeOptions:[{label:"采购入库",value:0,key:"transType0"},{label:"采购退货出库",value:1,key:"transType1"},{label:"零售出库",value:2,key:"transType2"},{label:"零售退货入库",value:3,key:"transType3"},{label:"客户订购出库",value:4,key:"transType4"},{label:"客户订购退货入库",value:5,key:"transType5"},{label:"调货入库",value:6,key:"transType6"},{label:"调货出库",value:7,key:"transType7"}],typeOptions:[{label:"入库/总量增加",value:0,key:"type0"},{label:"出库/总量减少",value:1,key:"type1"}],rules:{tempType:[{required:!0,message:"请选择订单类型",trigger:"blur"}],inputOutputKey:[{required:!0,message:"请选择订单编号",trigger:"blur"}],shopkeeperWarehouseKey:[{required:!0,message:"请选择关联库存",trigger:"blur"}],transType:[{required:!0,message:"请选择交易类型",trigger:"blur"}],type:[{required:!0,message:"请选择变化类型",trigger:"blur"}],quantity:[{required:!0,message:"请设置变化数量",trigger:"blur"}],startNum:[{required:!0,message:"请设置起始库存",trigger:"blur"}],finalNum:[{required:!0,message:"请设置结余库存",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{},shopGoodsList:[]},watch:{},created:function(){this.getshopkeeperWarehouseList(),this.getinputWarehouseList(),this.getoutputWarehouseList(),this.rowData.detailWarehouseKey?(this.ruleForm.inputOutputKey=this.rowData.inputOutputKey,this.ruleForm.shopkeeperWarehouseKey=this.rowData.shopkeeperWarehouseKey,this.ruleForm.type=this.rowData.type,this.ruleForm.quantity=this.rowData.quantity,this.ruleForm.startNum=this.rowData.startNum,this.ruleForm.finalNum=this.rowData.finalNum,this.ruleForm.detailWarehouseKey=this.rowData.detailWarehouseKey,this.ruleForm.transType=this.rowData.transType,this.ruleForm.atTime=this.rowData.atTime,0==this.ruleForm.transType||1==this.ruleForm.transType||6==this.ruleForm.transType?this.ruleForm.tempType="input_warehouse":this.ruleForm.tempType="output_warehouse",this.getOptions()):this.ifCreate=!0},methods:{getshopkeeperWarehouseList:function(){var e=this;Object(n["r"])().then((function(t){200==t.data.code?e.shopkeeperWarehouseOptions=t.data.data:e.$message.error(t.data.msg)}))},getinputWarehouseList:function(){var e=this;Object(p["d"])().then((function(t){200==t.data.code?e.inputOptions=t.data.data:e.$message.error(t.data.msg)}))},getoutputWarehouseList:function(){var e=this;Object(c["d"])().then((function(t){200==t.data.code?e.outputOptions=t.data.data:e.$message.error(t.data.msg)}))},close:function(){this.$parent.drawer=!1},getOptions:function(){"input_warehouse"==this.tempType?this.isShow=!0:"output_warehouse"==this.tempType&&(this.isShow=!1)},save:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r={inputOutputKey:t.ruleForm.inputOutputKey,shopkeeperWarehouseKey:t.ruleForm.shopkeeperWarehouseKey,type:t.ruleForm.type,transType:t.ruleForm.transType,quantity:t.ruleForm.quantity,startNum:t.ruleForm.startNum,finalNum:t.ruleForm.finalNum,atTime:t.ruleForm.atTime,status:"",detailWarehouseKey:t.ruleForm.detailWarehouseKey};Object(n["l"])(r).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var r={inputOutputKey:t.ruleForm.inputOutputKey,shopkeeperWarehouseKey:t.ruleForm.shopkeeperWarehouseKey,type:t.ruleForm.type,transType:t.ruleForm.transType,quantity:t.ruleForm.quantity,startNum:t.ruleForm.startNum,finalNum:t.ruleForm.finalNum,atTime:h()().format("YYYY-MM-DD HH:mm:ss"),status:"",detailWarehouseKey:t.ruleForm.detailWarehouseKey};Object(n["h"])(r).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}))}}},f=m,y=(r("4268"),r("2877")),b=Object(y["a"])(f,s,i,!1,null,null,null),g=b.exports,O=r("7e1e"),v={name:"slist",data:function(){return{pageSize:10,pageNo:1,total:null,drawer:!1,rowData:{},tableData:[],multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10},shopOptions:[],goodsOptions:[],transTypeOptions:[{label:"采购入库",value:0},{label:"采购退货出库",value:1},{label:"零售出库",value:2},{label:"零售退货入库",value:3},{label:"客户订购出库",value:4},{label:"客户订购退货入库",value:5},{label:"调货入库",value:6},{label:"调货出库",value:7},{label:"盘盈入库",value:8},{label:"盘亏出库",value:9}],typeOptions:[{label:"入库/总量增加",value:0},{label:"出库/总量减少",value:1}]}},computed:{tableColumn:function(){return[{prop:"shopCode",label:"门店编码"},{prop:"shopName",label:"门店名称"},{prop:"goodsCode",label:"商品编码"},{prop:"goodsName",label:"商品名称"},{slots:{name:"column-type"},label:"变化类型"},{slots:{name:"column-transType"},label:"交易类型"},{prop:"startNum",label:"起始库存"},{slots:{name:"column-quantity"},label:"变化数量"},{prop:"finalNum",label:"结余库存"},{slots:{name:"column-atTime"},label:"发生日期"},{slots:{name:"column-todo"},label:"操作",fixed:"right",width:"150px"}]},searchConfig:function(){return[{label:"请选择",placeholder:"请选择门店",field:"shopCode",value:"",type:"select",options:this.shopOptions},{label:"请选择",placeholder:"请选择商品",field:"goodsCode",value:"",type:"select",options:this.goodsOptions},{label:"请选择",placeholder:"请选择变化类型",field:"type",value:"",type:"select",options:this.typeOptions},{label:"请选择",placeholder:"请选择交易类型",field:"transType",value:"",type:"select",options:this.transTypeOptions}]}},props:{},components:{TableList:u["a"],warehouseEdit:g,reloadAndsearch:l["a"]},created:function(){this.getshoplist(),this.getgoodslist()},methods:{getshoplist:function(){var e=this;Object(O["nb"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.shopOptions.push({label:t.shopName,value:t.shopCode})})):e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(O["V"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.goodsOptions.push({label:t.goodsName,value:t.goodsCode})})):e.$message.error("获取失败!")}))},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,r&&(this.query.pageSize=r),this.loadings.table=!0;var a={page:this.query.pageNo,size:this.query.pageSize,transType:"",type:"",goodsCode:"",shopCode:""};Object(n["k"])(a).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,r&&(this.query.pageSize=r);var a=this.$refs.search.search;Object(n["k"])({transType:a.transType,type:a.type,goodsCode:a.goodsCode,shopCode:a.shopCode,page:this.query.pageNo,size:this.query.pageSize}).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},editRow:function(e){this.rowData=e,this.drawer=!0},deleteRow:function(e){var t=this;console.log("deleteRow",e),Object(n["i"])({detailWarehouseKey:e.detailWarehouseKey}).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("删除失败!")}))},success:function(){this.drawer=!1,this.rowData={},this.getTableData()},reload:function(){this.getTableData()},add:function(){this.rowData={},this.drawer=!0},handleSelectionDelete:function(e){this.multipleSelection=e},handleDeleteList:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push({detailWarehouseKey:e.detailWarehouseKey})})),console.log(t),this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["j"])(t).then((function(){e.getTableData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.multipleSelection=[]}))}else this.$message({type:"error",message:"至少选择一项"})}}},T=v,w=(r("e68d"),Object(y["a"])(T,a,o,!1,null,"470a7856",null));t["default"]=w.exports},4268:function(e,t,r){"use strict";r("605c")},"605c":function(e,t,r){},"64dc":function(e,t,r){"use strict";r.d(t,"x",(function(){return n})),r.d(t,"y",(function(){return u})),r.d(t,"u",(function(){return l})),r.d(t,"g",(function(){return s})),r.d(t,"v",(function(){return i})),r.d(t,"w",(function(){return p})),r.d(t,"m",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"a",(function(){return m})),r.d(t,"f",(function(){return f})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return b})),r.d(t,"o",(function(){return g})),r.d(t,"s",(function(){return O})),r.d(t,"r",(function(){return v})),r.d(t,"n",(function(){return T})),r.d(t,"t",(function(){return w})),r.d(t,"p",(function(){return k})),r.d(t,"q",(function(){return W})),r.d(t,"k",(function(){return F})),r.d(t,"h",(function(){return S})),r.d(t,"l",(function(){return j})),r.d(t,"i",(function(){return K})),r.d(t,"j",(function(){return N}));var a=r("b775"),o=(r("4328"),"/api");function n(e){return Object(a["a"])({url:o+"/SupplierInventory/list",method:"get",params:e})}function u(e){return Object(a["a"])({url:o+"/SupplierInventory/list-page",method:"get",params:e})}function l(e){return Object(a["a"])({url:o+"/SupplierInventory/add",method:"POST",data:e})}function s(e){return Object(a["a"])({url:o+"/SupplierInventory/update",method:"POST",data:e})}function i(e){return Object(a["a"])({url:o+"/SupplierInventory/delete",method:"POST",data:e})}function p(e){return Object(a["a"])({url:o+"/SupplierInventory/delete-list",method:"POST",data:e})}function c(e){return Object(a["a"])({url:o+"/ShopInventory/getByshopCode",method:"get",params:e})}function d(e){return Object(a["a"])({url:o+"/ShopInventory/list-page",method:"get",params:e})}function h(e){return Object(a["a"])({url:o+"/ShopInventory/list",method:"get",params:e})}function m(e){return Object(a["a"])({url:o+"/ShopInventory/add",method:"POST",data:e})}function f(e){return Object(a["a"])({url:o+"/ShopInventory/update",method:"POST",data:e})}function y(e){return Object(a["a"])({url:o+"/ShopInventory/delete",method:"POST",data:e})}function b(e){return Object(a["a"])({url:o+"/ShopInventory/delete-list",method:"POST",data:e})}function g(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/getByShopCode",method:"get",params:e})}function O(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/list-page",method:"get",params:e})}function v(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/list",method:"get",params:e})}function T(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/add",method:"POST",data:e})}function w(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/update",method:"POST",data:e})}function k(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/delete",method:"POST",data:e})}function W(e){return Object(a["a"])({url:o+"/shopkeeperWarehouse/delete-list",method:"POST",data:e})}function F(e){return Object(a["a"])({url:o+"/detailWarehouse/list-page",method:"get",params:e})}function S(e){return Object(a["a"])({url:o+"/detailWarehouse/add",method:"POST",data:e})}function j(e){return Object(a["a"])({url:o+"/detailWarehouse/update",method:"POST",data:e})}function K(e){return Object(a["a"])({url:o+"/detailWarehouse/delete",method:"POST",data:e})}function N(e){return Object(a["a"])({url:o+"/detailWarehouse/delete-list",method:"POST",data:e})}},"972b":function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return u})),r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return p}));var a=r("b775"),o=(r("4328"),"/api");function n(e){return Object(a["a"])({url:o+"/inputWarehouse/list",method:"get",params:e})}function u(e){return Object(a["a"])({url:o+"/inputWarehouse/list-page",method:"get",params:e})}function l(e){return Object(a["a"])({url:o+"/inputWarehouse/add",method:"POST",data:e})}function s(e){return Object(a["a"])({url:o+"/inputWarehouse/update",method:"POST",data:e})}function i(e){return Object(a["a"])({url:o+"/inputWarehouse/delete",method:"POST",data:e})}function p(e){return Object(a["a"])({url:o+"/inputWarehouse/delete-list",method:"POST",data:e})}},b7be:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return u})),r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return p}));var a=r("b775"),o=(r("4328"),"/api");function n(e){return Object(a["a"])({url:o+"/outputWarehouse/list",method:"get",params:e})}function u(e){return Object(a["a"])({url:o+"/outputWarehouse/list-page",method:"get",params:e})}function l(e){return Object(a["a"])({url:o+"/outputWarehouse/add",method:"POST",data:e})}function s(e){return Object(a["a"])({url:o+"/outputWarehouse/update",method:"POST",data:e})}function i(e){return Object(a["a"])({url:o+"/outputWarehouse/delete",method:"POST",data:e})}function p(e){return Object(a["a"])({url:o+"/outputWarehouse/delete-list",method:"POST",data:e})}},e68d:function(e,t,r){"use strict";r("eef3")},eef3:function(e,t,r){}}]);
//# sourceMappingURL=chunk-129564d2.98fea7b3.js.map