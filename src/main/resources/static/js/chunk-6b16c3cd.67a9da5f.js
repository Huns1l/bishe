(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b16c3cd"],{"4e9f":function(e,t,o){"use strict";o("e447")},"50d9":function(e,t,o){"use strict";o.r(t);o("ac1f"),o("841c");var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#fff",padding:"10px"}},[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig,hidden:e.hidden},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-status",fn:function(o){return[t("span",[e._v(e._s("0"==o.row.status?"在单":"1"==o.row.status?"生产":"2"==o.row.status?"在途":"3"==o.row.status?"入库":"4"==o.row.status?"占用":"5"==o.row.status?"出库":"-"))])]}},{key:"column-type",fn:function(o){return[0==o.row.type?t("span",[e._v("零售")]):e._e(),1==o.row.type?t("span",[e._v("客户订购")]):e._e(),2==o.row.type?t("span",[e._v("调货出库")]):e._e()]}},{key:"column-createTime",fn:function(o){return[o.row.createTime?t("span",[e._v(e._s(e._f("datefmt")(o.row.createTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-deadlineTime",fn:function(o){return[o.row.deadlineTime?t("span",[e._v(e._s(e._f("datefmt")(o.row.deadlineTime,"YYYY-MM-DD HH:mm:ss")))]):e._e()]}},{key:"column-todo",fn:function(o){return[t("el-button",{directives:[{name:"show",rawName:"v-show",value:!o.row.returnNum,expression:"!props.row.returnNum"}],attrs:{type:"text",icon:"el-icon-s-promotion"},on:{click:function(t){return e.editRow1(o.row)}}},[e._v("退货")]),0==e.userType?t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editRow(o.row)}}},[e._v("编辑")]):e._e(),t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small",icon:"el-icon-document"},on:{click:function(t){return e.deleteRow(o.row)}}},[e._v("删除")])]}}])})],1),e.drawer?t("outputOrderEdit",{attrs:{drawer:e.drawer,rowData:e.rowData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e(),e.drawer1?t("outputOrderReturn",{attrs:{drawer:e.drawer1,rowData:e.rowData1,ifShow:e.ifShow},on:{close:function(t){e.drawer1=!1},success:function(t){return e.success()}}}):e._e()],1)},n=[],s=(o("d3b7"),o("159b"),o("14d9"),o("b7be")),r=o("c367"),i=o("ffd4"),l=o("7e1e"),c=o("d9cc"),u=o("70b6"),d=o("15d4"),p={name:"slist",data:function(){return{hidden:!0,total:null,drawer:!1,rowData:{},tableData:[],drawer1:!1,rowData1:{},multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10},ifShow:!1,userType:"",shopOptions:[],goodsOptions:[],inventoryOptions:[],customerOptions:[]}},computed:{tableColumn:function(){return[{prop:"shopCode",label:"门店编码"},{prop:"shopName",label:"门店名称"},{prop:"goodsCode",label:"商品编码"},{prop:"goodsName",label:"商品名称"},{prop:"customerCode",label:"客户编码"},{prop:"customerName",label:"客户名称"},{prop:"outputPlan",label:"计划数"},{prop:"outputPrice",label:"出库价格"},{prop:"outputActual",label:"实际数"},{prop:"inventoryCode",label:"仓库编码"},{prop:"positionCode",label:"货位编码"},{prop:"vehicleCode",label:"车辆编码"},{slots:{name:"column-status"},label:"状态"},{slots:{name:"column-type"},label:"出库类型"},{prop:"shopPeopleCode",label:"门店操作员"},{prop:"inventoryPeopleCode",label:"仓库操作员"},{prop:"returnNum",label:"退货数"},{prop:"returnReason",label:"退货原因"},{slots:{name:"column-createTime"},label:"预计日期"},{slots:{name:"column-deadlineTime"},label:"最迟日期"},{slots:{name:"column-todo"},label:"操作",fixed:"right",width:250}]},searchConfig:function(){return[{label:"请选择",placeholder:"请选择门店",field:"shopCode",value:"",type:"select",options:this.shopOptions},{label:"请选择",placeholder:"请选择商品",field:"goodsCode",value:"",type:"select",options:this.goodsOptions},{label:"请选择",placeholder:"请选择仓库",field:"inventoryCode",value:"",type:"select",options:this.inventoryOptions},{label:"请选择",placeholder:"请选择客户",field:"customerCode",value:"",type:"select",options:this.customerOptions}]}},props:{},components:{TableList:r["a"],outputOrderEdit:c["a"],outputOrderReturn:u["a"],reloadAndsearch:i["a"]},created:function(){this.getshoplist(),this.getgoodslist(),this.getCustomerList(),this.getinventorylist();var e=JSON.parse(localStorage.getItem("userInfo"));this.userType=e.userType},methods:{getCustomerList:function(){var e=this;Object(l["e"])().then((function(t){200==t.data.code?(e.customerOptions=[],t.data.data.forEach((function(t){e.customerOptions.push({label:t.customerName,value:t.customerCode})}))):e.$message.error("获取失败!")}))},getinventorylist:function(){var e=this;Object(l["cb"])().then((function(t){200===t.data.code?(e.inventoryOptions=[],t.data.data.forEach((function(t){("2"==t.inventoryType&&null!=t.belongKey||""!=t.belongKey)&&e.inventoryOptions.push({label:t.inventoryName,value:t.inventoryCode})}))):e.$message.error(t.msg)})).catch((function(e){console.log(e)}))},getshoplist:function(){var e=this;Object(l["ob"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.shopOptions.push({label:t.shopName,value:t.shopCode})})):e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(l["W"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.goodsOptions.push({label:t.goodsName,value:t.goodsCode})})):e.$message.error("获取失败!")}))},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,o&&(this.query.pageSize=o),this.loadings.table=!0;var a={page:this.query.pageNo,size:this.query.pageSize,shopCode:"",goodsCode:"",customerCode:"",inventoryCode:"",status:5,isDeleted:0,type:1};Object(s["e"])(a).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,o&&(this.query.pageSize=o);var a=this.$refs.search.search;Object(s["e"])({page:this.query.pageNo,size:this.query.pageSize,shopCode:a.shopCode,goodsCode:a.goodsCode,customerCode:a.customerCode,inventoryCode:a.inventoryCode,status:5,isDeleted:0,type:1}).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},editRow:function(e){this.rowData=e,this.drawer=!0},editRow1:function(e){var t=this;Object(d["b"])({checkType:1,inputOutputKey:e.outputWarehouseKey}).then((function(o){200==o.data.code?(t.rowData1=o.data.data||e,t.drawer1=!0):t.$message.error("获取失败!")}))},deleteRow:function(e){var t=this;this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])({isDeleted:0,outputWarehouseKey:e.outputWarehouseKey}).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("删除失败!")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},success:function(){this.drawer1=!1,this.rowData1={},this.drawer=!1,this.rowData={},this.getTableData()},reload:function(){this.getTableData()},add:function(){this.rowData={},this.drawer=!0},handleSelectionDelete:function(e){this.multipleSelection=e},handleDeleteList:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push({isDeleted:0,outputWarehouseKey:e.outputWarehouseKey})})),console.log(t),this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t).then((function(){e.getTableData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.multipleSelection=[]}))}else this.$message({type:"error",message:"至少选择一项"})}}},h=p,f=(o("4e9f"),o("2877")),m=Object(f["a"])(h,a,n,!1,null,"318414e7",null);t["default"]=m.exports},e447:function(e,t,o){}}]);
//# sourceMappingURL=chunk-6b16c3cd.67a9da5f.js.map