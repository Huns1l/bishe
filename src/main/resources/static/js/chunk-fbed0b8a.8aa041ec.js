(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbed0b8a"],{"0c479":function(e,t,n){"use strict";n("93c8")},"2eaa":function(e,t,n){"use strict";n("342c")},"342c":function(e,t,n){},"64dc":function(e,t,n){"use strict";n.d(t,"x",(function(){return a})),n.d(t,"y",(function(){return l})),n.d(t,"u",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"v",(function(){return u})),n.d(t,"w",(function(){return c})),n.d(t,"m",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"f",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y})),n.d(t,"o",(function(){return g})),n.d(t,"s",(function(){return v})),n.d(t,"r",(function(){return O})),n.d(t,"n",(function(){return w})),n.d(t,"t",(function(){return S})),n.d(t,"p",(function(){return j})),n.d(t,"q",(function(){return K})),n.d(t,"k",(function(){return k})),n.d(t,"h",(function(){return T})),n.d(t,"l",(function(){return $})),n.d(t,"i",(function(){return D})),n.d(t,"j",(function(){return _}));var r=n("b775"),o=(n("4328"),"/api");function a(e){return Object(r["a"])({url:o+"/SupplierInventory/list",method:"get",params:e})}function l(e){return Object(r["a"])({url:o+"/SupplierInventory/list-page",method:"get",params:e})}function i(e){return Object(r["a"])({url:o+"/SupplierInventory/add",method:"POST",data:e})}function s(e){return Object(r["a"])({url:o+"/SupplierInventory/update",method:"POST",data:e})}function u(e){return Object(r["a"])({url:o+"/SupplierInventory/delete",method:"POST",data:e})}function c(e){return Object(r["a"])({url:o+"/SupplierInventory/delete-list",method:"POST",data:e})}function d(e){return Object(r["a"])({url:o+"/ShopInventory/getByshopCode",method:"get",params:e})}function p(e){return Object(r["a"])({url:o+"/ShopInventory/list-page",method:"get",params:e})}function f(e){return Object(r["a"])({url:o+"/ShopInventory/list",method:"get",params:e})}function h(e){return Object(r["a"])({url:o+"/ShopInventory/add",method:"POST",data:e})}function b(e){return Object(r["a"])({url:o+"/ShopInventory/update",method:"POST",data:e})}function m(e){return Object(r["a"])({url:o+"/ShopInventory/delete",method:"POST",data:e})}function y(e){return Object(r["a"])({url:o+"/ShopInventory/delete-list",method:"POST",data:e})}function g(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/getByShopCode",method:"get",params:e})}function v(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/list-page",method:"get",params:e})}function O(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/list",method:"get",params:e})}function w(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/add",method:"POST",data:e})}function S(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/update",method:"POST",data:e})}function j(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/delete",method:"POST",data:e})}function K(e){return Object(r["a"])({url:o+"/shopkeeperWarehouse/delete-list",method:"POST",data:e})}function k(e){return Object(r["a"])({url:o+"/detailWarehouse/list-page",method:"get",params:e})}function T(e){return Object(r["a"])({url:o+"/detailWarehouse/add",method:"POST",data:e})}function $(e){return Object(r["a"])({url:o+"/detailWarehouse/update",method:"POST",data:e})}function D(e){return Object(r["a"])({url:o+"/detailWarehouse/delete",method:"POST",data:e})}function _(e){return Object(r["a"])({url:o+"/detailWarehouse/delete-list",method:"POST",data:e})}},"93c8":function(e,t,n){},"94c0":function(e,t,n){"use strict";n.r(t);n("ac1f"),n("841c");var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#fff",padding:"10px"}},[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-status",fn:function(n){return[1==n.row.status?t("el-tag",{attrs:{type:"success",size:"medium"}},[e._v("正常")]):e._e(),2==n.row.status?t("el-tag",{attrs:{type:"danger",size:"medium"}},[e._v("关仓")]):e._e()]}},{key:"column-address",fn:function(n){return[t("span",[e._v(e._s(n.row.province)+e._s(n.row.city)+e._s(n.row.district)+e._s(n.row.detail))])]}},{key:"column-todo",fn:function(n){return[1==n.row.status?t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small",icon:"el-icon-moon"},on:{click:function(t){return e.setClose(n.row)}}},[e._v("设为关仓")]):e._e(),2==n.row.status?t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small",icon:"el-icon-sunny"},on:{click:function(t){return e.setOpen(n.row)}}},[e._v("设为正常")]):e._e(),t("el-button",{staticClass:"prohibitclick",attrs:{type:"text",size:"small",icon:"el-icon-document"},on:{click:function(t){return e.deleteRow(n.row)}}},[e._v("删除")])]}}])})],1),e.drawer?t("configEdit",{attrs:{drawer:e.drawer,rowData:e.rowData,ShopInventoryList:e.tableData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e()],1)},o=[],a=n("5530"),l=(n("d3b7"),n("159b"),n("14d9"),n("64dc")),i=n("c367"),s=n("ffd4"),u=function(){var e=this,t=e._self._c;return t("el-drawer",{attrs:{size:"30%",title:e.ifCreate?"新增门店仓库配置":"编辑门店仓库配置",visible:e.drawer,direction:e.direction,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[t("el-row",[t("el-row",[t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"所属门店",prop:"belongKey"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"所属门店"},model:{value:e.ruleForm.belongKey,callback:function(t){e.$set(e.ruleForm,"belongKey",t)},expression:"ruleForm.belongKey"}},e._l(e.shopOptions,(function(e){return t("el-option",{key:e.shopKey,attrs:{label:e.shopName,value:e.shopKey,clearable:"",placeholder:"所属门店"}})})),1)],1)],1),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{label:"默认仓库",prop:"inventoryKey"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"默认仓库"},model:{value:e.ruleForm.inventoryKey,callback:function(t){e.$set(e.ruleForm,"inventoryKey",t)},expression:"ruleForm.inventoryKey"}},e._l(e.options,(function(e){return t("el-option",{key:e.inventoryKey,attrs:{label:e.inventoryName,clearable:"",value:e.inventoryKey}})})),1)],1)],1)],1)],1),t("el-row",[t("el-form-item",{staticStyle:{display:"inline-block",float:"right",margin:"10px 40%"}},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("关闭")])],1)],1)],1)],1)},c=[],d=n("7e1e"),p={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,ruleForm:{belongKey:"",inventoryKey:""},shopOptions:[],options:[],rules:{belongKey:[{required:!0,message:"请选择门店",trigger:"blur"}],inventoryKey:[{required:!0,message:"请选择仓库",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{},ShopInventoryList:[]},watch:{},created:function(){this.getshoplist(),this.getinventorylist(),this.rowData.belongKey?(this.ruleForm.belongKey=this.rowData.belongKey,this.ruleForm.inventoryKey=this.rowData.inventoryKey):this.ifCreate=!0},methods:{getshoplist:function(){var e=this;Object(d["nb"])().then((function(t){200==t.data.code?e.shopOptions=t.data.data:e.$message.error("获取失败!")}))},getinventorylist:function(){var e=this;Object(d["bb"])().then((function(t){200===t.data.code?(e.options=[],t.data.data.forEach((function(t){("2"==t.inventoryType&&null==t.belongKey||""==t.belongKey)&&e.options.push(t)}))):e.$message.error(t.msg)})).catch((function(e){console.log(e)}))},close:function(){this.$parent.drawer=!1},save:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(l["f"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;Object(l["a"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}))}}},f=p,h=(n("2eaa"),n("2877")),b=Object(h["a"])(f,u,c,!1,null,null,null),m=b.exports,y={name:"slist",data:function(){return{pageSize:10,pageNo:1,total:null,drawer:!1,rowData:{},tableData:[],multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10},statusList:[{label:"开业",value:"1"},{label:"关店",value:"2"},{label:"搬迁",value:"3"},{label:"筹备",value:"4"},{label:"暂停",value:"5"},{label:"预关店",value:"6"}]}},created:function(){},computed:{tableColumn:function(){return[{prop:"shopCode",label:"门店编码"},{prop:"shopName",label:"门店名称"},{prop:"inventoryCode",label:"仓库编码"},{prop:"inventoryName",label:"仓库名称"},{slots:{name:"column-address"},label:"仓库地址"},{slots:{name:"column-status"},label:"状态"},{prop:"description",label:"仓库备注"},{slots:{name:"column-todo"},label:"操作",fixed:"right"}]},searchConfig:function(){return[{label:"门店名称",placeholder:"请输入门店名称",field:"shopName",value:"",type:"input"},{label:"门店仓库名称",placeholder:"请输入门店仓库名称",field:"inventoryName",value:"",type:"input"},{label:"请选择",placeholder:"请选择状态",field:"status",value:"",type:"select",options:this.statusList}]}},props:{},components:{TableList:i["a"],configEdit:m,reloadAndsearch:s["a"]},methods:{getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,n&&(this.query.pageSize=n),this.loadings.table=!0;var r={page:this.query.pageNo,size:this.query.pageSize,inventoryName:"",inventoryCode:"",status:""};Object(l["e"])(r).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,n&&(this.query.pageSize=n);var r=this.$refs.search.search;Object(l["e"])(Object(a["a"])(Object(a["a"])({},r),{},{page:this.query.pageNo,size:this.query.pageSize})).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records):console.log("error")})).finally((function(){e.loadings.table=!1}))},deleteRow:function(e){var t=this;console.log("deleteRow",e),Object(l["b"])({belongKey:e.belongKey,inventoryKey:e.inventoryKey}).then((function(e){200==e.data.code?(t.$message.success("删除成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("删除失败!")}))},setClose:function(e){var t=this,n={belongKey:e.shopKey,inventoryKey:e.inventoryKey,status:2};Object(l["f"])(n).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("编辑失败!")}))},setOpen:function(e){var t=this,n={belongKey:e.shopKey,inventoryKey:e.inventoryKey,status:1};Object(l["f"])(n).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.getTableData(),t.$forceUpdate()):t.$message.error("编辑失败!")}))},success:function(){this.drawer=!1,this.rowData={},this.getTableData()},reload:function(){this.getTableData()},add:function(){this.rowData={},this.drawer=!0},handleSelectionDelete:function(e){this.multipleSelection=e},handleDeleteList:function(){var e=this;if(this.multipleSelection.length>0){var t=[];this.multipleSelection.forEach((function(e){t.push({belongKey:e.belongKey,inventoryKey:e.inventoryKey})})),console.log(t),this.$confirm("删除操作, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["c"])(t).then((function(){e.getTableData(),e.$message({type:"success",message:"删除成功!"})})).catch((function(e){console.log(e)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"}),e.multipleSelection=[]}))}else this.$message({type:"error",message:"至少选择一项"})}}},g=y,v=(n("0c479"),Object(h["a"])(g,r,o,!1,null,"6d4b6ada",null));t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-fbed0b8a.8aa041ec.js.map