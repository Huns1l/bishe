(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4545875d"],{"083a":function(e,t,o){"use strict";var r=o("0d51"),a=TypeError;e.exports=function(e,t){if(!delete e[t])throw a("Cannot delete property "+r(t)+" of "+r(e))}},"171d":function(e,t,o){"use strict";o("c93d")},"3f80":function(e,t,o){},"4ec3":function(e,t,o){"use strict";o.d(t,"a",(function(){return s})),o.d(t,"e",(function(){return c})),o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return l})),o.d(t,"d",(function(){return d})),o.d(t,"f",(function(){return p}));o("751a");var r=o("4328"),a=o.n(r),n=o("b775"),u="/api";function s(e){return Object(n["a"])({url:u+"/user/list",method:"get",params:a.a.parse(e)})}function c(e){return Object(n["a"])({url:u+"/user/selectUserPage",method:"get",params:a.a.parse(e)})}function i(e){return Object(n["a"])({url:u+"/user/createUser",method:"post",data:a.a.parse(e)})}function l(e){return Object(n["a"])({url:u+"/user/deleteUserById",method:"get",params:a.a.parse(e)})}function d(e){return Object(n["a"])({url:u+"/user/deleteUserByIdList",method:"get",params:a.a.parse(e)})}function p(e){return Object(n["a"])({url:u+"/user/updateUserById",method:"post",data:a.a.parse(e)})}},"64dc":function(e,t,o){"use strict";o.d(t,"x",(function(){return n})),o.d(t,"y",(function(){return u})),o.d(t,"u",(function(){return s})),o.d(t,"g",(function(){return c})),o.d(t,"v",(function(){return i})),o.d(t,"w",(function(){return l})),o.d(t,"m",(function(){return d})),o.d(t,"e",(function(){return p})),o.d(t,"d",(function(){return h})),o.d(t,"a",(function(){return m})),o.d(t,"f",(function(){return f})),o.d(t,"b",(function(){return b})),o.d(t,"c",(function(){return g})),o.d(t,"o",(function(){return y})),o.d(t,"s",(function(){return k})),o.d(t,"r",(function(){return w})),o.d(t,"n",(function(){return v})),o.d(t,"t",(function(){return N})),o.d(t,"p",(function(){return C})),o.d(t,"q",(function(){return F})),o.d(t,"k",(function(){return O})),o.d(t,"h",(function(){return S})),o.d(t,"l",(function(){return j})),o.d(t,"i",(function(){return D})),o.d(t,"j",(function(){return T}));var r=o("b775"),a=(o("4328"),"/api");function n(e){return Object(r["a"])({url:a+"/SupplierInventory/list",method:"get",params:e})}function u(e){return Object(r["a"])({url:a+"/SupplierInventory/list-page",method:"get",params:e})}function s(e){return Object(r["a"])({url:a+"/SupplierInventory/add",method:"POST",data:e})}function c(e){return Object(r["a"])({url:a+"/SupplierInventory/update",method:"POST",data:e})}function i(e){return Object(r["a"])({url:a+"/SupplierInventory/delete",method:"POST",data:e})}function l(e){return Object(r["a"])({url:a+"/SupplierInventory/delete-list",method:"POST",data:e})}function d(e){return Object(r["a"])({url:a+"/ShopInventory/getByshopCode",method:"get",params:e})}function p(e){return Object(r["a"])({url:a+"/ShopInventory/list-page",method:"get",params:e})}function h(e){return Object(r["a"])({url:a+"/ShopInventory/list",method:"get",params:e})}function m(e){return Object(r["a"])({url:a+"/ShopInventory/add",method:"POST",data:e})}function f(e){return Object(r["a"])({url:a+"/ShopInventory/update",method:"POST",data:e})}function b(e){return Object(r["a"])({url:a+"/ShopInventory/delete",method:"POST",data:e})}function g(e){return Object(r["a"])({url:a+"/ShopInventory/delete-list",method:"POST",data:e})}function y(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/getByShopCode",method:"get",params:e})}function k(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/list-page",method:"get",params:e})}function w(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/list",method:"get",params:e})}function v(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/add",method:"POST",data:e})}function N(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/update",method:"POST",data:e})}function C(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/delete",method:"POST",data:e})}function F(e){return Object(r["a"])({url:a+"/shopkeeperWarehouse/delete-list",method:"POST",data:e})}function O(e){return Object(r["a"])({url:a+"/detailWarehouse/list-page",method:"get",params:e})}function S(e){return Object(r["a"])({url:a+"/detailWarehouse/add",method:"POST",data:e})}function j(e){return Object(r["a"])({url:a+"/detailWarehouse/update",method:"POST",data:e})}function D(e){return Object(r["a"])({url:a+"/detailWarehouse/delete",method:"POST",data:e})}function T(e){return Object(r["a"])({url:a+"/detailWarehouse/delete-list",method:"POST",data:e})}},"751a":function(e,t,o){"use strict";o("b775")},a434:function(e,t,o){"use strict";var r=o("23e7"),a=o("7b0b"),n=o("23cb"),u=o("5926"),s=o("07fa"),c=o("3a34"),i=o("3511"),l=o("65f0"),d=o("8418"),p=o("083a"),h=o("1dde"),m=h("splice"),f=Math.max,b=Math.min;r({target:"Array",proto:!0,forced:!m},{splice:function(e,t){var o,r,h,m,g,y,k=a(this),w=s(k),v=n(e,w),N=arguments.length;for(0===N?o=r=0:1===N?(o=0,r=w-v):(o=N-2,r=b(f(u(t),0),w-v)),i(w+o-r),h=l(k,r),m=0;m<r;m++)g=v+m,g in k&&d(h,m,k[g]);if(h.length=r,o<r){for(m=v;m<w-r;m++)g=m+r,y=m+o,g in k?k[y]=k[g]:p(k,y);for(m=w;m>w-r+o;m--)p(k,m-1)}else if(o>r)for(m=w-r;m>v;m--)g=m+r-1,y=m+o-1,g in k?k[y]=k[g]:p(k,y);for(m=0;m<o;m++)k[m+v]=arguments[m+2];return c(k,w-r+o),h}})},bb73:function(e,t,o){"use strict";o("3f80")},c93d:function(e,t,o){},d417:function(e,t,o){"use strict";o.d(t,"b",(function(){return n})),o.d(t,"d",(function(){return u})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return c})),o.d(t,"e",(function(){return i})),o.d(t,"f",(function(){return l})),o.d(t,"g",(function(){return d})),o.d(t,"h",(function(){return p}));var r=o("b775"),a=(o("4328"),"/api");function n(e){return Object(r["a"])({url:a+"/countCheck/getById",method:"get",params:e})}function u(e){return Object(r["a"])({url:a+"/countCheck/list-page",method:"get",params:e})}function s(e){return Object(r["a"])({url:a+"/countCheck/list",method:"get",params:e})}function c(e){return Object(r["a"])({url:a+"/countCheck/add",method:"POST",data:e})}function i(e){return Object(r["a"])({url:a+"/countCheck/update",method:"POST",data:e})}function l(e){return Object(r["a"])({url:a+"/purchaseIntegrate/list-page",method:"get",params:e})}function d(e){return Object(r["a"])({url:a+"/salesIntegrate/list-page",method:"get",params:e})}function p(e){return Object(r["a"])({url:a+"/transferIntegrate/list-page",method:"get",params:e})}},d90a:function(e,t,o){},f052:function(e,t,o){"use strict";o.r(t);o("ac1f"),o("841c");var r=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#fff",padding:"10px"}},[t("reloadAndsearch",{ref:"search",attrs:{config:e.searchConfig,hidden:e.hidden,hidden1:e.hidden},on:{search:e.search}}),t("div",{staticClass:"list-model"},[t("TableList",{attrs:{pageMethod:e.getTableData,searchMethod:e.getTableData,"table-data":e.tableData,multiCheck:e.multiCheck,tableColumn:e.tableColumn,query:e.query,total:e.total,loading:e.loadings.table},on:{"update:query":function(t){e.query=t}},scopedSlots:e._u([{key:"column-inv",fn:function(o){return["00000000000000000"==o.row.positionCode?t("span",[e._v("-")]):t("span",[e._v(e._s(o.row.inventoryCode)+e._s(o.row.inventoryName))])]}},{key:"column-pop",fn:function(o){return["00000000000000000"==o.row.positionCode?t("span",[e._v("-")]):t("span",[e._v(e._s(o.row.positionCode))])]}},{key:"column-how",fn:function(o){return[o.row.countNum?o.row.accountNum==o.row.countNum?t("span",[e._v("盘平")]):o.row.accountNum<o.row.countNum?t("span",[e._v("盘盈")]):o.row.accountNum>o.row.countNum?t("span",[e._v("盘亏")]):e._e():t("span",[e._v("-")])]}},{key:"column-much",fn:function(o){return[o.row.countNum&&o.row.accountNum!=o.row.countNum?o.row.accountNum<o.row.countNum?t("span",[e._v("+"+e._s(o.row.countNum-o.row.accountNum))]):o.row.accountNum>o.row.countNum?t("span",[e._v("-"+e._s(o.row.accountNum-o.row.countNum))]):e._e():t("span")]}},{key:"column-status",fn:function(o){return[t("span",[e._v(e._s("0"==o.row.checkStatus?"未审批":"1"==o.row.checkStatus?"同意":"2"==o.row.checkStatus?"驳回":"-"))])]}},{key:"column-todo",fn:function(o){return[o.row.countCheckKey&&1==o.row.checkStatus?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"}},[e._v("已审核通过")]):e._e(),o.row.countNum&&!o.row.countCheckKey&&o.row.countNum!=o.row.accountNum?t("el-button",{attrs:{type:"text",icon:"el-icon-mouse"},on:{click:function(t){return e.editRow1(o.row)}}},[e._v("提交审核")]):e._e(),o.row.countCheckKey&&1!=o.row.checkStatus?t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.editRow2(o.row)}}},[e._v("编辑")]):e._e(),t("el-button",{attrs:{type:"text",icon:"el-icon-notebook-2"},on:{click:function(t){return e.editRow(o.row)}}},[e._v("设置盘点数")])]}}])})],1),e.drawer?t("countManagementEdit",{attrs:{drawer:e.drawer,rowData:e.rowData,shopGoodsList:e.tableData},on:{close:function(t){e.drawer=!1},success:function(t){return e.success()}}}):e._e(),e.drawer1?t("countManagementApply",{attrs:{drawer:e.drawer1,rowData:e.rowData1},on:{close:function(t){e.drawer1=!1},success:function(t){return e.success()}}}):e._e()],1)},a=[],n=o("5530"),u=(o("d3b7"),o("159b"),o("14d9"),o("64dc")),s=o("c367"),c=o("ffd4"),i=(o("a4d3"),o("e01a"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{size:"30%",title:e.ifCreate?"新增盘点数":"编辑盘点数",visible:e.drawer,direction:e.direction,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,width:"1200px"},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"门店",prop:"shopCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"所属门店",clearable:"",disabled:""},on:{change:function(t){return e.getMyPosition()}},model:{value:e.ruleForm.shopCode,callback:function(t){e.$set(e.ruleForm,"shopCode",t)},expression:"ruleForm.shopCode"}},e._l(e.shopOptions,(function(e){return t("el-option",{key:e.shopKey,attrs:{label:e.shopName,value:e.shopCode}})})),1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"商品",prop:"goodsCode"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"商品",clearable:"",disabled:""},model:{value:e.ruleForm.goodsCode,callback:function(t){e.$set(e.ruleForm,"goodsCode",t)},expression:"ruleForm.goodsCode"}},e._l(e.goodsOptions,(function(e){return t("el-option",{key:e.goodsCode,attrs:{label:e.goodsName,value:e.goodsCode}})})),1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"账面库存",prop:"accountNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"账面库存",type:"Number",min:0,disabled:""},model:{value:e.ruleForm.accountNum,callback:function(t){e.$set(e.ruleForm,"accountNum",t)},expression:"ruleForm.accountNum"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"盘点数",prop:"countNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"盘点数",type:"Number",min:0},model:{value:e.ruleForm.countNum,callback:function(t){e.$set(e.ruleForm,"countNum",t)},expression:"ruleForm.countNum"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"备注",prop:"description"}},[t("el-input",{attrs:{clearable:"",placeholder:"备注",type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1)],1)],1),t("div",{staticClass:"dialog_footer"},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("关闭")])],1)],1)}),l=[],d=(o("a434"),o("7e1e")),p=o("c1df"),h=o.n(p),m={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,ruleForm:{shopCode:"",goodsCode:"",positionCode:"",maxNum:"",minNum:"",accountNum:"",occupyNum:"",availableNum:"",countNum:"",rejectsNum:"",description:"",shopkeeperWarehouseKey:"",onwayNum:"",operateTime:""},shopOptions:[],goodsOptions:[],positionOptions:[],rules:{shopCode:[{required:!0,message:"请选择门店",trigger:"blur"}],goodsCode:[{required:!0,message:"请选择商品",trigger:"blur"}],accountNum:[{required:!0,message:"请设置账面库存",trigger:"blur"}],countNum:[{required:!0,message:"请设置盘点数",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{},shopGoodsList:[]},watch:{},created:function(){this.getshoplist(),this.rowData.shopkeeperWarehouseKey?(this.ruleForm.shopCode=this.rowData.shopCode,this.ruleForm.goodsCode=this.rowData.goodsCode,this.ruleForm.positionCode=this.rowData.positionCode,this.ruleForm.maxNum=this.rowData.maxNum,this.ruleForm.minNum=this.rowData.minNum,this.ruleForm.accountNum=this.rowData.accountNum,this.ruleForm.occupyNum=this.rowData.occupyNum,this.ruleForm.availableNum=this.rowData.availableNum,this.ruleForm.countNum=this.rowData.countNum,this.ruleForm.rejectsNum=this.rowData.rejectsNum,this.ruleForm.description=this.rowData.description,this.ruleForm.shopkeeperWarehouseKey=this.rowData.shopkeeperWarehouseKey,this.ruleForm.onwayNum=this.rowData.onwayNum):this.ifCreate=!0},methods:{getshoplist:function(){var e=this;Object(d["ob"])().then((function(t){200==t.data.code?e.shopOptions=t.data.data:e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(d["W"])().then((function(t){200==t.data.code?(e.goodsOptions=t.data.data,e.shopGoodsList.forEach((function(t){e.goodsOptions.forEach((function(o){if(o.goodsCode==t.goodsCode&&t.shopCode==e.ruleForm.shopCode){var r=e.goodsOptions.indexOf(t);e.goodsOptions.splice(r,1)}}))}))):e.$message.error("获取失败!")}))},getMyPosition:function(){var e=this;this.getgoodslist(),Object(u["m"])({shopCode:this.ruleForm.shopCode}).then((function(t){200==t.data.code?(e.inventoryKey=t.data.data.inventoryKey,Object(d["hb"])({inventoryKey:t.data.data.inventoryKey}).then((function(t){200==t.data.code?e.positionOptions=t.data.data:e.$message.error("获取失败!")}))):e.$message.error("获取失败!")}))},close:function(){this.$parent.drawer=!1},save:function(e){var t=this;this.ruleForm.availableNum=parseInt(this.ruleForm.accountNum)+parseInt(this.ruleForm.onwayNum)-parseInt(this.ruleForm.occupyNum),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.ruleForm.operateTime=h()().format("YYYY-MM-DD HH:mm:ss"),Object(u["t"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;this.ruleForm.availableNum=parseInt(this.ruleForm.accountNum)+parseInt(this.ruleForm.onwayNum)-parseInt(this.ruleForm.occupyNum),this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.ruleForm.operateTime=h()().format("YYYY-MM-DD HH:mm:ss");var o={shopCode:t.ruleForm.shopCode,goodsCode:t.ruleForm.goodsCode,positionCode:t.ruleForm.positionCode,maxNum:t.ruleForm.maxNum,minNum:t.ruleForm.minNum,accountNum:t.ruleForm.accountNum,occupyNum:t.ruleForm.occupyNum,availableNum:t.ruleForm.availableNum,rejectsNum:t.ruleForm.rejectsNum,countNum:t.ruleForm.countNum,description:t.ruleForm.description,onwayNum:t.ruleForm.onwayNum};Object(u["n"])(o).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success(),t.$forceUpdate()):t.$message.error("新增失败!")}))}))}}},f=m,b=(o("171d"),o("2877")),g=Object(b["a"])(f,i,l,!1,null,null,null),y=g.exports,k=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{size:"30%",title:e.ifCreate?"新增审核":"编辑审核",visible:e.drawer,direction:e.direction,"close-on-press-escape":!1,"show-close":!1,wrapperClosable:!1,"append-to-body":!0,width:"1200px"},on:{"update:visible":function(t){e.drawer=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"关联库存",prop:"shopkeeperWarehouseKey"}},[t("el-input",{attrs:{clearable:"",placeholder:"关联库存",disabled:""},model:{value:e.ruleForm.shopkeeperWarehouseKey,callback:function(t){e.$set(e.ruleForm,"shopkeeperWarehouseKey",t)},expression:"ruleForm.shopkeeperWarehouseKey"}})],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批数",prop:"checkNum"}},[t("el-input",{attrs:{clearable:"",placeholder:"审批数",type:"Number",min:0},model:{value:e.ruleForm.checkNum,callback:function(t){e.$set(e.ruleForm,"checkNum",t)},expression:"ruleForm.checkNum"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批类型",prop:"checkType"}},[t("el-select",{attrs:{size:"mini",placeholder:"审批类型",clearable:""},model:{value:e.ruleForm.checkType,callback:function(t){e.$set(e.ruleForm,"checkType",t)},expression:"ruleForm.checkType"}},[t("el-option",{attrs:{label:"盘盈",value:0}}),t("el-option",{attrs:{label:"盘亏",value:1}})],1)],1)],1),e.ifCreate?e._e():t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批人",prop:"checkPeople"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{size:"middle",placeholder:"审批人",clearable:"",disabled:""},model:{value:e.ruleForm.checkPeople,callback:function(t){e.$set(e.ruleForm,"checkPeople",t)},expression:"ruleForm.checkPeople"}},e._l(e.checkPeopleOptions,(function(e){return t("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userCode}})})),1)],1)],1)],1),e.ifCreate?e._e():t("el-row",[t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批结果",prop:"checkStatus"}},[t("el-select",{attrs:{size:"small",placeholder:"审批结果",clearable:"",disabled:""},model:{value:e.ruleForm.checkStatus,callback:function(t){e.$set(e.ruleForm,"checkStatus",t)},expression:"ruleForm.checkStatus"}},[t("el-option",{attrs:{label:"未审批",value:0,disabled:""}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-minus"}),e._v(" 未审批 ")])]),t("el-option",{attrs:{label:"同意",value:1}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-check"}),e._v(" 同意 ")])]),t("el-option",{attrs:{label:"驳回",value:2}},[t("span",{staticStyle:{float:"left"}},[t("i",{staticClass:"el-icon-close"}),e._v(" 驳回 ")])])],1)],1)],1),t("el-col",{attrs:{span:10}},[t("el-form-item",{attrs:{label:"审批意见",prop:"description"}},[t("el-input",{attrs:{clearable:"",placeholder:"审批意见",type:"textarea",disabled:""},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1)],1)],1),t("div",{staticClass:"dialog_footer"},[0==e.ifCreate?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("ruleForm")}}},[e._v("保存修改")]):t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.create("ruleForm")}}},[e._v("提交审核")]),t("el-button",{on:{click:function(t){return e.close()}}},[e._v("取消")])],1)],1)},w=[],v=o("d417"),N=o("4ec3"),C={name:"guestEdit",data:function(){return{direction:"btt",ifCreate:!1,ruleForm:{countCheckKey:"",happenTime:h()().format("YYYY-MM-DD HH:mm:ss"),shopkeeperWarehouseKey:"",checkStatus:"",checkTime:"",checkType:"",checkNum:"",description:"",checkPeople:""},checkPeopleOptions:[],rules:{shopkeeperWarehouseKey:[{required:!0,message:"请选择关联库存",trigger:"blur"}]}}},props:{drawer:{default:!0},rowData:{},shopGoodsList:[]},watch:{},created:function(){this.getUserList(),this.rowData.shopkeeperWarehouseKey?(this.ruleForm.countCheckKey=this.rowData.countCheckKey,this.ruleForm.shopkeeperWarehouseKey=this.rowData.shopkeeperWarehouseKey,this.ruleForm.checkType=this.rowData.checkType,this.ruleForm.checkNum=this.rowData.checkNum,this.ruleForm.countCheckKey?(this.ifCreate=!1,this.ruleForm.happenTime=this.rowData.happenTime,this.ruleForm.checkTime=this.rowData.checkTime,this.ruleForm.description=this.rowData.description,this.ruleForm.checkPeople=this.rowData.checkPeople,this.ruleForm.checkStatus=this.rowData.checkStatus):this.ifCreate=!0):this.ifCreate=!0},methods:{getUserList:function(){var e=this;Object(N["a"])({userType:1}).then((function(t){e.checkPeopleOptions=t.data.data})).catch((function(e){console.log(e)}))},close:function(){this.$parent.drawer1=!1},save:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.ruleForm.checkStatus=0,Object(v["e"])(t.ruleForm).then((function(e){200==e.data.code?(t.$message.success("编辑成功!"),t.$parent.success()):t.$message.error("编辑失败!")}))}))},create:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;var o={countCheckKey:t.ruleForm.countCheckKey,happenTime:t.ruleForm.happenTime,shopkeeperWarehouseKey:t.ruleForm.shopkeeperWarehouseKey,checkStatus:0,checkTime:t.ruleForm.checkTime,checkType:t.ruleForm.checkType,checkNum:t.ruleForm.checkNum,description:t.ruleForm.description,checkPeople:t.ruleForm.checkPeople};Object(v["a"])(o).then((function(e){200==e.data.code?(t.$message.success("新增成功!"),t.$parent.success()):t.$message.error("新增失败!")}))}))}}},F=C,O=(o("bb73"),Object(b["a"])(F,k,w,!1,null,null,null)),S=O.exports,j={name:"slist",data:function(){return{pageSize:10,pageNo:1,total:null,drawer:!1,drawer1:!1,multiCheck:!1,hidden:!0,rowData:{},rowData1:{},tableData:[],multipleSelection:[],loadings:{table:!0},query:{pageNo:1,pageSize:10},shopOptions:[],list:[],goodsOptions:[]}},computed:{tableColumn:function(){return[{prop:"shopCode",label:"门店编码"},{prop:"shopName",label:"门店名称",width:"300px",sortable:!0},{prop:"goodsCode",label:"商品编码"},{prop:"goodsName",label:"商品名称",width:"300px",sortable:!0},{prop:"modelCode",label:"型号"},{slots:{name:"column-inv"},label:"仓库"},{slots:{name:"column-pop"},label:"货位"},{prop:"accountNum",label:"账面库存",width:"120px",sortable:!0},{prop:"countNum",label:"清点数",width:"100px",sortable:!0},{slots:{name:"column-how"},label:"盘点情况"},{slots:{name:"column-much"},label:"盈亏数量",width:"120px",sortable:!0},{prop:"description",label:"备注"},{slots:{name:"column-status"},label:"审批状态"},{slots:{name:"column-todo"},label:"操作",fixed:"right",width:"250px"}]},searchConfig:function(){return[{label:"请选择",placeholder:"请选择门店",field:"shopCode",value:"",type:"select",options:this.shopOptions},{label:"请选择",placeholder:"请选择商品",field:"goodsCode",value:"",type:"select",options:this.goodsOptions}]}},props:{},components:{TableList:s["a"],countManagementEdit:y,countManagementApply:S,reloadAndsearch:c["a"]},created:function(){this.getcountCheckList(),this.getshoplist(),this.getgoodslist()},methods:{getcountCheckList:function(){var e=this;Object(v["c"])().then((function(t){200==t.data.code?e.list=t.data.data:e.$message.error("获取失败!")}))},getshoplist:function(){var e=this;Object(d["ob"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.shopOptions.push({label:t.shopName,value:t.shopCode})})):e.$message.error("获取失败!")}))},getgoodslist:function(){var e=this;Object(d["W"])().then((function(t){200==t.data.code?t.data.data.forEach((function(t){e.goodsOptions.push({label:t.goodsName,value:t.goodsCode})})):e.$message.error("获取失败!")}))},getTableData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,o&&(this.query.pageSize=o),this.loadings.table=!0;var r={page:this.query.pageNo,size:this.query.pageSize,shopCode:"",goodsCode:""};Object(u["s"])(r).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records,0==e.list.length?e.tableData.forEach((function(e){e.countCheckKey=""})):e.tableData.forEach((function(t){e.list.forEach((function(e){t.shopkeeperWarehouseKey==e.shopkeeperWarehouseKey&&(t.countCheckKey=e.countCheckKey,t.checkStatus=e.checkStatus)}))}))):console.log("error")})).finally((function(){e.loadings.table=!1}))},search:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1?arguments[1]:void 0;this.query.pageNo=t,o&&(this.query.pageSize=o);var r=this.$refs.search.search;Object(u["s"])(Object(n["a"])(Object(n["a"])({},r),{},{page:this.query.pageNo,size:this.query.pageSize})).then((function(t){200===t.data.code?(e.total=t.data.data.total,e.tableData=t.data.data.records,0==e.list.length?e.tableData.forEach((function(e){e.countCheckKey=""})):e.tableData.forEach((function(t){e.list.forEach((function(e){t.shopkeeperWarehouseKey==e.shopkeeperWarehouseKey&&(t.countCheckKey=e.countCheckKey,t.checkStatus=e.checkStatus)}))}))):console.log("error")})).finally((function(){e.loadings.table=!1}))},editRow:function(e){this.rowData=e,this.drawer=!0},editRow1:function(e){e.countNum>e.accountNum?this.rowData1={shopkeeperWarehouseKey:e.shopkeeperWarehouseKey,checkNum:e.countNum-e.accountNum,checkType:0}:e.countNum<e.accountNum&&(this.rowData1={shopkeeperWarehouseKey:e.shopkeeperWarehouseKey,checkNum:e.accountNum-e.countNum,checkType:1}),this.drawer1=!0},editRow2:function(e){var t=this;Object(v["b"])({countCheckKey:e.countCheckKey}).then((function(e){200==e.data.code?(t.rowData1=e.data.data,console.log(t.rowData),t.drawer1=!0):t.$message.error("获取失败!")}))},success:function(){this.drawer=!1,this.rowData={},this.drawer1=!1,this.rowData1={},this.getcountCheckList(),this.getTableData(),this.$forceUpdate()},reload:function(){this.getTableData(),this.getcountCheckList()},add:function(){this.rowData={},this.drawer=!0}}},D=j,T=(o("f196"),Object(b["a"])(D,r,a,!1,null,"3945797c",null));t["default"]=T.exports},f196:function(e,t,o){"use strict";o("d90a")}}]);
//# sourceMappingURL=chunk-4545875d.e9120689.js.map